<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="stylesheet" title="Default Style" href="styles/default/main.css" type="text/css">
<link rel="stylesheet" href="styles/default/xultu.css" type="text/css">


<link rel="stylesheet" href="styles/default/xultu-print.css" type="text/css" media="print">


<link rel="home"   href="http://www.xulplanet.com/"            title="http://www.XulPlanet.com/">
<link rel="search" href="http://www.xulplanet.com/cgi-bin/search/search.cgi" title="Search XulPlanet">
<link rel="author" href="http://www.xulplanet.com/ndeakin" title="Neil Deakin">
 <link rel="up" href="http://www.xulplanet.com/tutorials/" title="Up"> 
 <link rel="first" href="intro.html" title="First"> 
 <link rel="last" href="end.html" title="Last"> 

 <link rel="prev" href="advevents.html"> 
 <link rel="next" href="focus.html"> 

<meta name="Description" content="Step by step tutorial of the XML User Interface Language">

<title>XulPlanet.com - Keyboard Shortcuts</title>

</head>
<body>

<div id="header">
  <a href="http://www.xulplanet.com/">
    <img id="logo" src="images/xulplanet.png" width="215" height="65" alt="XUL Planet">
  </a>

<div id="locationlinks">
  <a href="http://www.xulplanet.com/">Home</a> &gt;

  <a href="http://www.xulplanet.com/tutorials/">Tutorials</a> :


  <a href="index.html">XUL Tutorial</a> :



 6.3 - Keyboard Shortcuts 
</div>



</div>



<hr class="edgesplit">

<div id="sidebar">

<div id="search">
  <form action="/cgi-bin/search/search.cgi" method="get">
    Search:<br>
    <input id="search-box" name="Terms" type="text">
    <input type="submit" value="Go">
  </form>
</div>

<hr>

<ul class="sidebar-section-links">
  <li><a href="http://www.xulplanet.com/tutorials/xultu/allofit.zip">Single Document Version</a></li>
  <li><a href="http://www.xulplanet.com/tutorials/xultu/xultu.zip">Download the XUL Tutorial</a><br></li>
  <li><a href="http://www.xulplanet.com/references/elemref/">Element Reference</a></li>
  <li><a href="http://www.xulplanet.com/references/elemref/quickref.html">Quick Reference</a><br></li>
  <li><a href="keyref.html">Key Code Reference</a></li>
  <li><a href="templateex.html">Template Syntax Examples</a></li>
</ul>

<hr>



<OL id="sidebar-docs-index">
  <LI class="sidebar-section-title">Introduction
  <OL>
    <LI> <A HREF="intro.html">Introduction</A></LI>
    <LI> <A HREF="xulfile.html">XUL Structure</A></LI>
    <LI> <A HREF="chromeurl.html">The Chrome URL</A></LI>
    <LI> <A HREF="packaging.html">Contents.rdf Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Simple Elements
  <OL>
    <LI> <A HREF="window.html">Creating a Window</A></LI>
    <LI> <A HREF="buttons.html">Adding Buttons</A></LI>
    <LI> <A HREF="textimage.html">Adding Labels and Images</A></LI>
    <LI> <A HREF="inputs.html">Input Controls</A></LI>
    <LI> <A HREF="lists.html">List Controls</A></LI>
    <LI> <A HREF="progress.html">Progress Meters</A></LI>
    <LI> <A HREF="htmlelem.html">Adding HTML Elements</A></LI>
    <LI> <A HREF="springs.html">Using Spacers</A></LI>
    <LI> <A HREF="advbtns.html">More Button Features</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">The Box Model
  <OL>
    <LI> <A HREF="boxes.html">The Box Model</A></LI>
    <LI> <A HREF="boxstyle.html">Element Positioning</A></LI>
    <LI> <A HREF="boxdet.html">Box Model Details</A></LI>
    <LI> <A HREF="titledbox.html">Groupboxes</A></LI>
    <LI> <A HREF="boxfinal.html">Adding More Elements</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">More Layout Elements
  <OL>
    <LI> <A HREF="stacks.html">Stacks and Decks</A></LI>
    <LI> <A HREF="bulletins.html">Stack Positioning</A></LI>
    <LI> <A HREF="tabpanel.html">Tabboxes</A></LI>
    <LI> <A HREF="grids.html">Grids</A></LI>
    <LI> <A HREF="cpanels.html">Content Panels</A></LI>
    <LI> <A HREF="splitter.html">Splitters</A></LI>
    <LI> <A HREF="scroll.html">Scroll Bars</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Toolbars and Menus
  <OL>
    <LI> <A HREF="toolbar.html">Toolbars</A></LI>
    <LI> <A HREF="menubar.html">Simple Menu Bars</A></LI>
    <LI> <A HREF="advmenu.html">More Menu Features</A></LI>
    <LI> <A HREF="popups.html">Popup Menus</A></LI>
    <LI> <A HREF="menuscroll.html">Scrolling Menus</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Events and Scripts
  <OL>
    <LI> <A HREF="events.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="advevents.html">More Event Handlers</A></LI>
    <LI> <SPAN CLASS="currentpage">Keyboard Shortcuts</SPAN></LI>
    <LI> <A HREF="focus.html">Focus and Selection</A></LI>
    <LI> <A HREF="commands.html">Commands</A></LI>
    <LI> <A HREF="commandupdate.html">Updating Commands</A></LI>
    <LI> <A HREF="broadob.html">Broadcasters and Observers</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Document Object Model
  <OL>
    <LI> <A HREF="dom.html">Document Object Model</A></LI>
    <LI> <A HREF="dommodify.html">Modifying a XUL Interface</A></LI>
    <LI> <A HREF="domlists.html">Manipulating Lists</A></LI>
    <LI> <A HREF="boxobject.html">Box Objects</A></LI>
    <LI> <A HREF="xpcom.html">XPCOM Interfaces</A></LI>
    <LI> <A HREF="xpcomex.html">XPCOM Examples</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Trees
  <OL>
    <LI> <A HREF="trees.html">Trees</A></LI>
    <LI> <A HREF="advtrees.html">More Tree Features</A></LI>
    <LI> <A HREF="seltree.html">Tree Selection</A></LI>
    <LI> <A HREF="treeview.html">Custom Tree Views</A></LI>
    <LI> <A HREF="treeviewdet.html">Tree View Details</A></LI>
    <LI> <A HREF="treeboxobject.html">Tree Box Objects</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">RDF and Templates
  <OL>
    <LI> <A HREF="intrordf.html">Introduction to RDF</A></LI>
    <LI> <A HREF="templates.html">Templates</A></LI>
    <LI> <A HREF="treetempl.html">Trees and Templates</A></LI>
    <LI> <A HREF="datasrc.html">RDF Datasources</A></LI>
    <LI> <A HREF="advrules.html">Advanced Rules</A></LI>
    <LI> <A HREF="persist.html">Persistent Data</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Skins and Locales
  <OL>
    <LI> <A HREF="style.html">Adding Style Sheets</A></LI>
    <LI> <A HREF="treestyle.html">Styling a Tree</A></LI>
    <LI> <A HREF="defskin.html">Modifying the Default Skin</A></LI>
    <LI> <A HREF="cskin.html">Creating a Skin</A></LI>
    <LI> <A HREF="locale.html">Localization</A></LI>
    <LI> <A HREF="locprops.html">Property Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Bindings
  <OL>
    <LI> <A HREF="introxbl.html">Introduction to XBL</A></LI>
    <LI> <A HREF="xblcontent.html">Anonymous Content</A></LI>
    <LI> <A HREF="xblatin.html">XBL Attribute Inheritance</A></LI>
    <LI> <A HREF="xblprops.html">Adding Properties</A></LI>
    <LI> <A HREF="xblmethods.html">Adding Methods</A></LI>
    <LI> <A HREF="xblevents.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="xblinherit.html">XBL Inheritance</A></LI>
    <LI> <A HREF="xblex.html">XBL Example</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Specialized Window Types
  <OL>
    <LI> <A HREF="featwin.html">Features of a Window</A></LI>
    <LI> <A HREF="dialogs.html">Creating Dialogs</A></LI>
    <LI> <A HREF="filedialog.html">Open and Save Dialogs</A></LI>
    <LI> <A HREF="wizard.html">Creating a Wizard</A></LI>
    <LI> <A HREF="advwiz.html">More Wizards</A></LI>
    <LI> <A HREF="overlay.html">Overlays</A></LI>
    <LI> <A HREF="crosspov.html">Cross Package Overlays</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Installation
  <OL>
    <LI> <A HREF="xpinstall.html">Creating an Installer</A></LI>
    <LI> <A HREF="xpiscript.html">Install Scripts</A></LI>
    <LI> <A HREF="xpiadv.html">Additional Install Features</A></LI>
  </OL>
</OL>

</div>



<div id="content">

<div class="navlinks-pnc">

  <a class="prevlink" title="6.2 - More Event Handlers"
     href="advevents.html">Previous</a>


  <a class="nextlink" title="6.4 - Focus and Selection"
     href="focus.html">Next</a>

</div>

<div class="xultu-content">

<h2>Keyboard Shortcuts</h2>

<P>
You could use keyboard event handlers to respond to the keyboard. However, it
would be tedious to do that for every button and menu item.
</P>

<H3>Creating a Keyboard Shortcut</H3>

<P>
XUL provides methods in which you can define keyboard shortcuts. We've
already seen in the section on menus that we can define an attribute called
<SPAN CLASS="attrib">accesskey</SPAN> which specifies the key which a user
can press to activate the menu or menu item. In the example below, the File
menu can be selected by pressing Alt and F (or some other key combination for
a specific platform). Once the File menu is open, the Close menu item can be
selected by pressing C.
</P>


Example 6.3.1:
<A HREF='examples/ex_keyshort_1.xul.txt'>Source</A>
<A HREF="examples/ex_keyshort_1.xul" ONCLICK="window.open('examples/ex_keyshort_1.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;menubar id="sample-menubar"&gt;
  &lt;menu id="file-menu" label="File" accesskey="f"&gt;
    &lt;menupopup id="file-popup"&gt;
      &lt;menuitem id="close-command" label="Close" accesskey="c"/&gt;
    &lt;/menupopup&gt;
  &lt;/menu&gt;
&lt;/menubar&gt;</PRE></DIV>



<P>
You can also use the <SPAN CLASS="attrib">accesskey</SPAN> attribute on
buttons. When the key is pressed in this case, the button is selected.
</P>

<P>
You might want to set up more general keyboard shortcuts however. For example,
pressing Contol+C to copy text to the clipboard. Although shortcuts such as
this might not always be valid, they will usually work any time the window is
open. Usually, a keyboard shortcut will be allowed at any time and you can
check to see whether it should do something using a script. For example, copying
text to the clipboard should only work when some text is selected.
</P>

<P>
XUL provides an element, <A CLASS="tag" HREF="elemref/ref_key.html">key</A>, which lets you define a
keyboard shortcut for a window. It has attributes to specify the key that should
be pressed and what modifier keys (such as Shift or Control) need to be pressed.
An example is shown below:
</P>


<DIV CLASS="sample"><PRE>&lt;keyset&gt;
  &lt;key id="sample-key" modifiers="shift" key="R"/&gt;
&lt;/keyset&gt;</PRE></DIV>



<P>
This sample defines a keyboard shortcut that is activated when the user presses
the Shift key and R. The <SPAN CLASS="attrib">key</SPAN> attribute (note that it has
the same name as the element itself) can be used to indicate which key should be
pressed, in this case R. You could add any character for this attribute to require
that key to be pressed. The modifiers that must be pressed are indicated with the
<SPAN CLASS="attrib">modifiers</SPAN> attribute. It is a space-separated list of
modifier keys, which are listed below.
</P>

<UL>
  <LI><DIV CLASS="attrib">alt</DIV>
      The user must press the Alt key.
  </LI>
  <LI><DIV CLASS="attrib">control</DIV>
      The user must press the Control key.
  </LI>
  <LI><DIV CLASS="attrib">meta</DIV>
      The user must press the Meta key. This is the Command key on the Macintosh.
  </LI>
  <LI><DIV CLASS="attrib">shift</DIV>
      The user must press the Shift key.
  </LI>
  <LI><DIV CLASS="attrib">accel</DIV>
      The user must press the special accelerator key.
  </LI>
</UL>

<P>
Your keyboard won't necessary have all of the keys, in which case they will
be mapped to modifier keys that you do have.
</P>

<P>
The <A CLASS="tag" HREF="elemref/ref_key.html">key</A> element must be placed inside a
<A CLASS="tag" HREF="elemref/ref_keyset.html">keyset</A> element. This element is designed for holding a
set of <A CLASS="tag" HREF="elemref/ref_key.html">key</A> elements, which serves to group all of the
key definitions in one place in a file. Any <A CLASS="tag" HREF="elemref/ref_key.html">key</A>
elements outside of a <A CLASS="tag" HREF="elemref/ref_keyset.html">keyset</A> element will not work.
</P>

<P>
Each platform generally uses a different key for keyboard shortcuts. For example,
Windows uses the Control key and the Macintosh uses the Command key. It would be
inconvenient to define separate <A CLASS="tag" HREF="elemref/ref_key.html">key</A> elements for each
platform. Luckily, there is a solution. The modifier
<SPAN CLASS="aval">accel</SPAN> refers to the special platform-specific key
used for shortcuts. If works just like the other modifiers, but won't be the same
on every platform.
</P>

<P>
Here are some additional examples:
</P>


<DIV CLASS="sample"><PRE>&lt;keyset&gt;
  &lt;key id="copy-key" modifiers="control" key="C"/&gt;
  &lt;key id="explore-key" modifiers="control alt" key="E"/&gt;
  &lt;key id="paste-key" modifiers="accel" key="V"/&gt;
&lt;/keyset&gt;</PRE></DIV>



<P>
The <SPAN CLASS="attrib">key</SPAN> attribute is used to specify the key that must
be pressed. However, there will also be cases where you want to refer to keys that
cannot be specified with a character (such as the Enter key or the function keys).
The <SPAN CLASS="attrib">key</SPAN> attribute can only be used for printable
characters. Another attribute, <SPAN CLASS="attrib">keycode</SPAN> can be used for
non-printable characters.
</P>

<P>
The <SPAN CLASS="attrib">keycode</SPAN> attribute should be set to a special code
which represents the key you want. A table of the keys is listed below. Not all of the
keys are available on all keyboards.
</P>

<TABLE BORDER=1>
  <TR>
    <TD>VK_CANCEL</TD><TD>VK_BACK</TD><TD>VK_TAB</TD><TD>VK_CLEAR</TD>
  </TR>
  <TR>
    <TD>VK_RETURN</TD><TD>VK_ENTER</TD><TD>VK_SHIFT</TD><TD>VK_CONTROL</TD>
  </TR>
  <TR>
    <TD>VK_ALT</TD><TD>VK_PAUSE</TD><TD>VK_CAPS_LOCK</TD><TD>VK_ESCAPE</TD>
  </TR>
  <TR>
    <TD>VK_SPACE</TD><TD>VK_PAGE_UP</TD><TD>VK_PAGE_DOWN</TD><TD>VK_END</TD>
  </TR>
  <TR>
    <TD>VK_HOME</TD><TD>VK_LEFT</TD><TD>VK_UP</TD><TD>VK_RIGHT</TD>
  </TR>
  <TR>
    <TD>VK_DOWN</TD><TD>VK_PRINTSCREEN</TD><TD>VK_INSERT</TD><TD>VK_DELETE</TD>
  </TR>
  <TR>
    <TD>VK_0</TD><TD>VK_1</TD><TD>VK_2</TD><TD>VK_3</TD>
  </TR>
  <TR>
    <TD>VK_4</TD><TD>VK_5</TD><TD>VK_6</TD><TD>VK_7</TD>
  </TR>
  <TR>
    <TD>VK_8</TD><TD>VK_9</TD><TD>VK_SEMICOLON</TD><TD>VK_EQUALS</TD>
  </TR>
  <TR>
    <TD>VK_A</TD><TD>VK_B</TD><TD>VK_C</TD><TD>VK_D</TD>
  </TR>
  <TR>
    <TD>VK_E</TD><TD>VK_F</TD><TD>VK_G</TD><TD>VK_H</TD>
  </TR>
  <TR>
    <TD>VK_I</TD><TD>VK_J</TD><TD>VK_K</TD><TD>VK_L</TD>
  </TR>
  <TR>
    <TD>VK_M</TD><TD>VK_N</TD><TD>VK_O</TD><TD>VK_P</TD>
  </TR>
  <TR>
    <TD>VK_Q</TD><TD>VK_R</TD><TD>VK_S</TD><TD>VK_T</TD>
  </TR>
  <TR>
    <TD>VK_U</TD><TD>VK_V</TD><TD>VK_W</TD><TD>VK_X</TD>
  </TR>
  <TR>
    <TD>VK_Y</TD><TD>VK_Z</TD><TD>VK_NUMPAD0</TD><TD>VK_NUMPAD1</TD>
  </TR>
  <TR>
    <TD>VK_NUMPAD2</TD><TD>VK_NUMPAD3</TD><TD>VK_NUMPAD4</TD><TD>VK_NUMPAD5</TD>
  </TR>
  <TR>
    <TD>VK_NUMPAD6</TD><TD>VK_NUMPAD7</TD><TD>VK_NUMPAD8</TD><TD>VK_NUMPAD9</TD>
  </TR>
  <TR>
    <TD>VK_MULTIPLY</TD><TD>VK_ADD</TD><TD>VK_SEPARATOR</TD><TD>VK_SUBTRACT</TD>
  </TR>
  <TR>
    <TD>VK_DECIMAL</TD><TD>VK_DIVIDE</TD><TD>VK_F1</TD><TD>VK_F2</TD>
  </TR>
  <TR>
    <TD>VK_F3</TD><TD>VK_F4</TD><TD>VK_F5</TD><TD>VK_F6</TD>
  </TR>
  <TR>
    <TD>VK_F7</TD><TD>VK_F8</TD><TD>VK_F9</TD><TD>VK_F10</TD>
  </TR>
  <TR>
    <TD>VK_F11</TD><TD>VK_F12</TD><TD>VK_F13</TD><TD>VK_F14</TD>
  </TR>
  <TR>
    <TD>VK_F15</TD><TD>VK_F16</TD><TD>VK_F17</TD><TD>VK_F18</TD>
  </TR>
  <TR>
    <TD>VK_F19</TD><TD>VK_F20</TD><TD>VK_F21</TD><TD>VK_F22</TD>
  </TR>
  <TR>
    <TD>VK_F23</TD><TD>VK_F24</TD><TD>VK_NUM_LOCK</TD><TD>VK_SCROLL_LOCK</TD>
  </TR>
  <TR>
    <TD>VK_COMMA</TD><TD>VK_PERIOD</TD><TD>VK_SLASH</TD><TD>VK_BACK_QUOTE</TD>
  </TR>
  <TR>
    <TD>VK_OPEN_BRACKET</TD><TD>VK_BACK_SLASH</TD><TD>VK_CLOSE_BRACKET</TD><TD>VK_QUOTE</TD>
  </TR>
  <TR>
    <TD>VK_HELP</TD><TD>&nbsp;</TD><TD>&nbsp;</TD><TD>&nbsp;</TD>
  </TR>
</TABLE>

<P>
For example, to create a shortcut that is activated when the user presses Alt
and F5, do the following:
</P>


<DIV CLASS="sample"><PRE>&lt;keyset&gt;
  &lt;key id="test-key" modifiers="alt" keycode="VK_F5"/&gt;
&lt;/keyset&gt;</PRE></DIV>



<P>

The example below demonstrates some more
keyboard shortcuts:
</P>


<DIV CLASS="sample"><PRE>&lt;keyset&gt;
  &lt;key id="copy-key" modifiers="accel" key="C"/&gt;
  &lt;key id="find-key" keycode="VK_F3"/&gt;
  &lt;key id="switch-key" modifiers="control alt" key="1"/&gt;
&lt;/keyset&gt;</PRE></DIV>



<P>
The first key is invoked when the user presses their platform-specific shortcut
key and C. The second is invoked when the user presses F3. The third is invoked
on a press of the Control key, the Alt key and 1. If you wanted to distinguish
between keys on the main part of the keyboard and the numeric keypad, use the
VK_NUMPAD keys (such as VK_NUMPAD1).
</P>

<H3>Using the Keyboard Shortcuts</H3>

<P>
Now that we know how to define keyboard shortcuts, we'll find out how we can
use them. There are two ways. The first is the simplest and just requires that
you use the keypress event handler on the <A CLASS="tag" HREF="elemref/ref_key.html">key</A>
element. When the user presses the key, the script will be invoked. An example
is shown below:
</P>


<DIV CLASS="sample"><PRE>&lt;keyset&gt;
  &lt;key id="copy-key" modifiers="accel" key="C" onkeypress="DoCopy();"/&gt;
&lt;/keyset&gt;</PRE></DIV>



<P>
The function DoCopy will be called when the user presses the keys specified
by the <A CLASS="tag" HREF="elemref/ref_key.html">key</A> element, which in this example,
are the keys for copying to the clipboard (such as Control+C). This will work
as long as the window is open. The DoCopy function should check to see if text
is selected and then copy the text to the clipboard. Note that textboxes have
the clipboard shortcuts built-in so you don't have to implement them yourself.
</P>

<P>
If you are assigning a keyboard shortcut that performs a command that also
exists on a menu, you can associate the <A CLASS="tag" HREF="elemref/ref_key.html">key</A> element
directly with the menu command. To do this, add a
<SPAN CLASS="attrib">key</SPAN> attribute on the
<A CLASS="tag" HREF="elemref/ref_menuitem.html">menuitem</A>. Set its value to the
<SPAN CLASS="attrib">id</SPAN> of the key that you want to use.
The example below demonstrates this.
</P>


Example 6.3.2:
<A HREF='examples/ex_keyshort_2.xul.txt'>Source</A>
<A HREF="examples/ex_keyshort_2.xul" ONCLICK="window.open('examples/ex_keyshort_2.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;keyset&gt;
  &lt;key id="paste-key" modifiers="accel" key="V"
          oncommand="alert('Paste invoked')"/&gt;
&lt;/keyset&gt;

&lt;menubar id="sample-menubar"&gt;
  &lt;menu id="edit-menu" label="Edit" accesskey="e"&gt;
    &lt;menupopup id="edit-popup"&gt;
      &lt;menuitem id="paste-command" accesskey="p" key="paste-key" label="Paste"
                   oncommand="alert('Paste invoked')"/&gt;
    &lt;/menupopup&gt;
  &lt;/menu&gt;
&lt;/menubar&gt;</PRE></DIV>



<P>
The menuitem's <SPAN CLASS="attrib">key</SPAN> attribute, which here is
<SPAN CLASS="aval">paste-key</SPAN> is equal to the
<SPAN CLASS="attrib">id</SPAN> of the defined key. You can use this for
additional keys as well to define keyboard shortcuts for any number of
menu items.
</P>

<P>
<IMG SRC="images/keyshort1.jpg" ALIGN="left" ALT="" WIDTH=142 HEIGHT=76>
You'll also notice in the image that text has been placed next to the Paste
menu command to indicate that Control and the V key can be pressed to invoke the
menu command. This is added for you based on the modifiers on the
<A CLASS="tag" HREF="elemref/ref_key.html">key</A> element. Keyboard shortcuts attached to menus
will work even if the menu is not open.
</P>

<P>
One additional feature of key definitions is that you can disable them easily.
To do this add a <SPAN CLASS="attrib">disabled</SPAN> attribute to the
<A CLASS="tag" HREF="elemref/ref_key.html">key</A> element and set it to the value
<SPAN CLASS="aval">true</SPAN>. This disables the keyboard shortcut so that it
cannot be invoked. It is useful to change the <SPAN CLASS="attrib">disabled</SPAN>
attribute using a script.
</P>

<H3>Key Example</H3>

<DIV CLASS="task">

<P>
Let's add keyboard shortcuts to the find files dialog. We'll add four of them,
one for each of the Cut, Copy, and Paste commands and also one for the Close
command when the user presses Escape.
</P>


<DIV CLASS="sample"><PRE><SPAN STYLE="color: red;">&lt;keyset&gt;
  &lt;key id="cut_cmd" modifiers="accel" key="X"/&gt;
  &lt;key id="copy_cmd" modifiers="accel" key="C"/&gt;
  &lt;key id="paste_cmd" modifiers="accel" key="V"/&gt;
  &lt;key id="close_cmd" keycode="VK_ESCAPE" oncommand="window.close();"/&gt;
&lt/keyset&gt;</SPAN>

&lt;vbox flex="1"&gt;
 &lt;toolbox&gt;
  &lt;menubar id="findfiles-menubar"&gt;
   &lt;menu id="file-menu" label="File" accesskey="f"&gt;
     &lt;menupopup id="file-popup"&gt;
       &lt;menuitem label="Open Search..." accesskey="o"/&gt;
       &lt;menuitem label="Save Search..." accesskey="s"/&gt;
       &lt;menuseparator/&gt;
       &lt;menuitem label="Close" accesskey="c" <SPAN STYLE="color: red;">key="close_cmd"</SPAN>
         oncommand="window.close();"/&gt;
     &lt;/menupopup&gt;
   &lt;/menu&gt;
   &lt;menu id="edit-menu" label="Edit" accesskey="e"&gt;
     &lt;menupopup id="edit-popup"&gt;
       &lt;menuitem label="Cut" accesskey="t" <SPAN STYLE="color: red;">key="cut_cmd"</SPAN>/&gt;
       &lt;menuitem label="Copy" accesskey="c" <SPAN STYLE="color: red;">key="copy_cmd"</SPAN>/&gt;
       &lt;menuitem label="Paste" accesskey="p" <SPAN STYLE="color: red;">key="paste_cmd"</SPAN> disabled="true"/&gt;
     &lt;/menupopup&gt;
   &lt;/menu&gt;</PRE></DIV>



<P>
Now we can use those shortcuts to activate the commands. Of course, the clipboard
commands don't do anything anyway, as we haven't written those scripts.
</P>

</DIV>

<H3>Key Events</H3>

<P>
There are three keyboard events that may be used if the key related features described
above aren't suitable. These events are listed in the following table:
</P>

<P>
<TABLE BORDER=1>
  <TR>
    <TD CLASS='attrib' COLSPAN=3 WIDTH='20%'>keypress
    </TD>
    <TD COLSPAN=1>
      Called when a key is pressed and released when an element has the focus.
      You might use this to check for allowed characters in a field.
    </TD>
  </TR>
  <TR>
    <TD CLASS='attrib' COLSPAN=3 WIDTH='20%'>keydown
    </TD>
    <TD COLSPAN=1>
      Called when a key is pressed down while an element has the focus. Note that
      the event will be called as soon as the key is pressed, even if it hasn't
      been released yet.
    </TD>
  </TR>
  <TR>
    <TD CLASS='attrib' COLSPAN=3 WIDTH='20%'>keyup
    </TD>
    <TD COLSPAN=1>
      Called when a key is released while an element has the focus.
    </TD>
  </TR>
</TABLE>

<P>
Key events are only sent to the element that has the focus. Typically, this will
include textboxes, buttons, checkboxes and so forth. If no element is focused, the
key event will instead be targeted at the XUL document itself. In this case, you
can add an event listener to the <A CLASS="tag" HREF="elemref/ref_window.html">window</A> tag. Normally
though, if you want to respond to keys globally, you will use a keyboard
shortcut as described earlier.
</P>

<P>
The key event object has two properties which hold the key that was pressed. The
keyCode property holds the key code and may be compared to one of the constants from
the key table earlier in this section. The charCode is used for printable characters
and will hold the character code for the key that was pressed.
</P>

<HR>
<P>
<A HREF="focus.html">(Next)</A>
Next, we'll find out how to handle focus and the selection.
</P>
<P>

Examples:
  <A HREF='examples/ex_keyshort_1.xul.txt'>6.3.1</A>
  <A HREF='examples/ex_keyshort_2.xul.txt'>6.3.2</A>
</P>
<P>Find files example so far:
<A HREF='examples/findfile/findfile-keyshort.xul.txt'>Source</A>
<A HREF="examples/findfile/findfile-keyshort.xul" ONCLICK="window.open('examples/findfile/findfile-keyshort.xul','xulff','chrome,resizable'); return false;">View</A>
</P>
</div>

<div class="navlinks-pnc">

  <a class="prevlink" title="6.2 - More Event Handlers"
     href="advevents.html">Previous</a>


  <a class="nextlink" title="6.4 - Focus and Selection"
     href="focus.html">Next</a>

</div>

</div>

<hr class="edgesplit">

<div id="copyblock">
  Copyright (C) 1999 - 2004 XulPlanet.com
</div>

</body>
</html>

