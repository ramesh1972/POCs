<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="stylesheet" title="Default Style" href="styles/default/main.css" type="text/css">
<link rel="stylesheet" href="styles/default/xultu.css" type="text/css">


<link rel="stylesheet" href="styles/default/xultu-print.css" type="text/css" media="print">


<link rel="home"   href="http://www.xulplanet.com/"            title="http://www.XulPlanet.com/">
<link rel="search" href="http://www.xulplanet.com/cgi-bin/search/search.cgi" title="Search XulPlanet">
<link rel="author" href="http://www.xulplanet.com/ndeakin" title="Neil Deakin">
 <link rel="up" href="http://www.xulplanet.com/tutorials/" title="Up"> 
 <link rel="first" href="intro.html" title="First"> 
 <link rel="last" href="end.html" title="Last"> 

 <link rel="prev" href="treetempl.html"> 
 <link rel="next" href="advrules.html"> 

<meta name="Description" content="Step by step tutorial of the XML User Interface Language">

<title>XulPlanet.com - RDF Datasources</title>

</head>
<body>

<div id="header">
  <a href="http://www.xulplanet.com/">
    <img id="logo" src="images/xulplanet.png" width="215" height="65" alt="XUL Planet">
  </a>

<div id="locationlinks">
  <a href="http://www.xulplanet.com/">Home</a> &gt;

  <a href="http://www.xulplanet.com/tutorials/">Tutorials</a> :


  <a href="index.html">XUL Tutorial</a> :



 9.4 - RDF Datasources 
</div>



</div>



<hr class="edgesplit">

<div id="sidebar">

<div id="search">
  <form action="/cgi-bin/search/search.cgi" method="get">
    Search:<br>
    <input id="search-box" name="Terms" type="text">
    <input type="submit" value="Go">
  </form>
</div>

<hr>

<ul class="sidebar-section-links">
  <li><a href="http://www.xulplanet.com/tutorials/xultu/allofit.zip">Single Document Version</a></li>
  <li><a href="http://www.xulplanet.com/tutorials/xultu/xultu.zip">Download the XUL Tutorial</a><br></li>
  <li><a href="http://www.xulplanet.com/references/elemref/">Element Reference</a></li>
  <li><a href="http://www.xulplanet.com/references/elemref/quickref.html">Quick Reference</a><br></li>
  <li><a href="keyref.html">Key Code Reference</a></li>
  <li><a href="templateex.html">Template Syntax Examples</a></li>
</ul>

<hr>



<OL id="sidebar-docs-index">
  <LI class="sidebar-section-title">Introduction
  <OL>
    <LI> <A HREF="intro.html">Introduction</A></LI>
    <LI> <A HREF="xulfile.html">XUL Structure</A></LI>
    <LI> <A HREF="chromeurl.html">The Chrome URL</A></LI>
    <LI> <A HREF="packaging.html">Contents.rdf Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Simple Elements
  <OL>
    <LI> <A HREF="window.html">Creating a Window</A></LI>
    <LI> <A HREF="buttons.html">Adding Buttons</A></LI>
    <LI> <A HREF="textimage.html">Adding Labels and Images</A></LI>
    <LI> <A HREF="inputs.html">Input Controls</A></LI>
    <LI> <A HREF="lists.html">List Controls</A></LI>
    <LI> <A HREF="progress.html">Progress Meters</A></LI>
    <LI> <A HREF="htmlelem.html">Adding HTML Elements</A></LI>
    <LI> <A HREF="springs.html">Using Spacers</A></LI>
    <LI> <A HREF="advbtns.html">More Button Features</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">The Box Model
  <OL>
    <LI> <A HREF="boxes.html">The Box Model</A></LI>
    <LI> <A HREF="boxstyle.html">Element Positioning</A></LI>
    <LI> <A HREF="boxdet.html">Box Model Details</A></LI>
    <LI> <A HREF="titledbox.html">Groupboxes</A></LI>
    <LI> <A HREF="boxfinal.html">Adding More Elements</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">More Layout Elements
  <OL>
    <LI> <A HREF="stacks.html">Stacks and Decks</A></LI>
    <LI> <A HREF="bulletins.html">Stack Positioning</A></LI>
    <LI> <A HREF="tabpanel.html">Tabboxes</A></LI>
    <LI> <A HREF="grids.html">Grids</A></LI>
    <LI> <A HREF="cpanels.html">Content Panels</A></LI>
    <LI> <A HREF="splitter.html">Splitters</A></LI>
    <LI> <A HREF="scroll.html">Scroll Bars</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Toolbars and Menus
  <OL>
    <LI> <A HREF="toolbar.html">Toolbars</A></LI>
    <LI> <A HREF="menubar.html">Simple Menu Bars</A></LI>
    <LI> <A HREF="advmenu.html">More Menu Features</A></LI>
    <LI> <A HREF="popups.html">Popup Menus</A></LI>
    <LI> <A HREF="menuscroll.html">Scrolling Menus</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Events and Scripts
  <OL>
    <LI> <A HREF="events.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="advevents.html">More Event Handlers</A></LI>
    <LI> <A HREF="keyshort.html">Keyboard Shortcuts</A></LI>
    <LI> <A HREF="focus.html">Focus and Selection</A></LI>
    <LI> <A HREF="commands.html">Commands</A></LI>
    <LI> <A HREF="commandupdate.html">Updating Commands</A></LI>
    <LI> <A HREF="broadob.html">Broadcasters and Observers</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Document Object Model
  <OL>
    <LI> <A HREF="dom.html">Document Object Model</A></LI>
    <LI> <A HREF="dommodify.html">Modifying a XUL Interface</A></LI>
    <LI> <A HREF="domlists.html">Manipulating Lists</A></LI>
    <LI> <A HREF="boxobject.html">Box Objects</A></LI>
    <LI> <A HREF="xpcom.html">XPCOM Interfaces</A></LI>
    <LI> <A HREF="xpcomex.html">XPCOM Examples</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Trees
  <OL>
    <LI> <A HREF="trees.html">Trees</A></LI>
    <LI> <A HREF="advtrees.html">More Tree Features</A></LI>
    <LI> <A HREF="seltree.html">Tree Selection</A></LI>
    <LI> <A HREF="treeview.html">Custom Tree Views</A></LI>
    <LI> <A HREF="treeviewdet.html">Tree View Details</A></LI>
    <LI> <A HREF="treeboxobject.html">Tree Box Objects</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">RDF and Templates
  <OL>
    <LI> <A HREF="intrordf.html">Introduction to RDF</A></LI>
    <LI> <A HREF="templates.html">Templates</A></LI>
    <LI> <A HREF="treetempl.html">Trees and Templates</A></LI>
    <LI> <SPAN CLASS="currentpage">RDF Datasources</SPAN></LI>
    <LI> <A HREF="advrules.html">Advanced Rules</A></LI>
    <LI> <A HREF="persist.html">Persistent Data</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Skins and Locales
  <OL>
    <LI> <A HREF="style.html">Adding Style Sheets</A></LI>
    <LI> <A HREF="treestyle.html">Styling a Tree</A></LI>
    <LI> <A HREF="defskin.html">Modifying the Default Skin</A></LI>
    <LI> <A HREF="cskin.html">Creating a Skin</A></LI>
    <LI> <A HREF="locale.html">Localization</A></LI>
    <LI> <A HREF="locprops.html">Property Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Bindings
  <OL>
    <LI> <A HREF="introxbl.html">Introduction to XBL</A></LI>
    <LI> <A HREF="xblcontent.html">Anonymous Content</A></LI>
    <LI> <A HREF="xblatin.html">XBL Attribute Inheritance</A></LI>
    <LI> <A HREF="xblprops.html">Adding Properties</A></LI>
    <LI> <A HREF="xblmethods.html">Adding Methods</A></LI>
    <LI> <A HREF="xblevents.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="xblinherit.html">XBL Inheritance</A></LI>
    <LI> <A HREF="xblex.html">XBL Example</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Specialized Window Types
  <OL>
    <LI> <A HREF="featwin.html">Features of a Window</A></LI>
    <LI> <A HREF="dialogs.html">Creating Dialogs</A></LI>
    <LI> <A HREF="filedialog.html">Open and Save Dialogs</A></LI>
    <LI> <A HREF="wizard.html">Creating a Wizard</A></LI>
    <LI> <A HREF="advwiz.html">More Wizards</A></LI>
    <LI> <A HREF="overlay.html">Overlays</A></LI>
    <LI> <A HREF="crosspov.html">Cross Package Overlays</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Installation
  <OL>
    <LI> <A HREF="xpinstall.html">Creating an Installer</A></LI>
    <LI> <A HREF="xpiscript.html">Install Scripts</A></LI>
    <LI> <A HREF="xpiadv.html">Additional Install Features</A></LI>
  </OL>
</OL>

</div>



<div id="content">

<div class="navlinks-pnc">

  <a class="prevlink" title="9.3 - Trees and Templates"
     href="treetempl.html">Previous</a>


  <a class="nextlink" title="9.5 - Advanced Rules"
     href="advrules.html">Next</a>

</div>

<div class="xultu-content">

<h2>RDF Datasources</h2>

<P>
Here, we'll look at additional datasources and how to use your own RDF files
as datasources.
</P>

<H3>Other Mozilla Datasources</H3>

<P>
Mozilla provides a number of other built-in datasources. Some of them are listed
here with a few examples. They work very similarly to the bookmarks, although
the fields will be different in each case.
</P>

<H3>The History List</H3>

<P>
The history datasource provides access to the user's history list which is the
list of URLs the user has visited recently. The resource can be referred to using
<SPAN CLASS="attrib">rdf:history</SPAN> as the datasource. The table below shows
the resources (or fields) that you can retrieve from the history datasource. Put
the URL values below where you want the value of the resource to be used.
</P>

<TABLE BORDER=1>
  <TR>
    <TD>Date</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#Date</TD>
    <TD>Date of last visit
  </TR>
  <TR>
    <TD>Name</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#Name</TD>
    <TD>Title of the page
  </TR>
  <TR>
    <TD>Page</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#Page</TD>
    <TD>Page name
  </TR>
  <TR>
    <TD>Referrer</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#Referrer</TD>
    <TD>Referrer of the page
  </TR>
  <TR>
    <TD>URL</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#URL</TD>
    <TD>URL of the page
  </TR>
  <TR>
    <TD>Visit Count</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#VisitCount</TD>
    <TD>Number of page visits
  </TR>
</TABLE>

<P>
A typical history list will display a tree with a selection of these fields.
To use them, just put the URL values above in the <SPAN CLASS="attrib">label</SPAN>
attributes of the buttons or treecells. You can use
<SPAN CLASS="aval">NC:HistoryRoot</SPAN> as the value of the
<SPAN CLASS="attrib">ref</SPAN> attribute. You can also use the value
<SPAN CLASS="aval">NC:HistoryByDate</SPAN> to get the history sorted into days.
</P>

<P>
Let's see an example of displaying the history list. We'll display the history
in a tree with three columns, the Name, the Page and the Date.
</P>

<!-- no header here on example -->

Example 9.4.1:
<A HREF='examples/ex_datasrc_1.xul.txt'>Source</A>
<DIV CLASS="examplec"><PRE>&lt;tree flex="1" datasources="rdf:history" ref="NC:HistoryRoot"&gt;

  &lt;treecols&gt;
    &lt;treecol id="name" label="Name" flex="1"/&gt;
    &lt;treecol id="url" label="URL" flex="1"/&gt;
    &lt;treecol id="date" label="Date" flex="1"/&gt;
  &lt;/treecols&gt;

  &lt;template&gt;

    &lt;rule&gt;
      &lt;treechildren flex="1"&gt;
       &lt;treeitem uri="rdf:*"&gt;
         &lt;treerow&gt;
           &lt;treecell label="rdf:http://home.netscape.com/NC-rdf#Name"/&gt;
           &lt;treecell label="rdf:http://home.netscape.com/NC-rdf#URL"/&gt;
           &lt;treecell label="rdf:http://home.netscape.com/NC-rdf#Date"/&gt;
         &lt;/treerow&gt;
       &lt;/treeitem&gt;
      &lt;/treechildren&gt;
    &lt;/rule&gt;
      
  &lt;/template&gt;
&lt;/tree&gt;</PRE></DIV>



<H3>Other Datasources</H3>

<P>
The tables below list some of the other datasources available with Mozilla.
You can use any of the resources that you want.
<P>

<P>
<B>Bookmarks (rdf:bookmarks)</B>: The bookmarks are generated from the user's bookmark list.
</P>

<TABLE BORDER=1>
  <TR><TD COLSPAN=3>Resources</TD></TR>
  <TR>
    <TD>Added Date</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#BookmarkAddDate</TD>
    <TD>Date the bookmark was added</TD>
  </TR>
  <TR>
    <TD>Description</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#Description</TD>
    <TD>Bookmark description</TD>
  </TR>
  <TR>
    <TD>Last Modified</TD>
    <TD>rdf:http://home.netscape.com/WEB-rdf#LastModifiedDate</TD>
    <TD>Date of last modification</TD>
  </TR>
  <TR>
    <TD>Last Visited</TD>
    <TD>rdf:http://home.netscape.com/WEB-rdf#LastVisitDate</TD>
    <TD>Date of last visit</TD>
  </TR>
  <TR>
    <TD>Name</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#Name</TD>
    <TD>Bookmark name</TD>
  </TR>
  <TR>
    <TD>Shortcut URL</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#ShortcutURL</TD>
    <TD>Custom keywords field</TD>
  </TR>
  <TR>
    <TD>URL</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#URL</TD>
    <TD>The URL to link to</TD>
  </TR>
</TABLE>

<BR>

<TABLE BORDER=1>
  <TR><TD COLSPAN=2>Possible Bookmarks Roots</TD></TR>
  <TR>
    <TD>NC:BookmarksRoot</TD>
    <TD>The top level of the bookmarks hierarchy</TD>
  </TR>
  <TR>
    <TD>NC:IEFavoritesRoot</TD>
    <TD>The bookmark folder that corresponds to the user's IE favorites.</TD>
  </TR>
  <TR>
    <TD>NC:PersonalToolbarFolder</TD>
    <TD>The bookmark folder that corresponds to the personal toolbar folder</TD>
  </TR>
</TABLE>

<P>
<B>Files (rdf:files)</B>: A view of the user's files.
</P>

<TABLE BORDER=1>
  <TR><TD COLSPAN=3>Resources</TD></TR>
  <TR>
    <TD>Name</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#Name</TD>
    <TD>Name of the file</TD>
  </TR>
  <TR>
    <TD>URL</TD>
    <TD>rdf:http://home.netscape.com/NC-rdf#URL</TD>
    <TD>URL of the file</TD>
  </TR>
</TABLE>

<BR>

<TABLE BORDER=1>
  <TR><TD COLSPAN=2>Possible Files Roots</TD></TR>
  <TR>
    <TD>NC:FilesRoot</TD>
    <TD>Top level of the filesystem (usually the list of drives)</TD>
  </TR>
  <TR>
    <TD>A file URL</TD>
    <TD>By using a file URL for the <SPAN CLASS="attrib">ref</SPAN> attribute, you can
        select a specific directory to be returned. For example, you might use
        file:///windows or files:///usr/local.
    </TD>
  </TR>
</TABLE>

<P>
The files datasource is an example of a datasource that determines its resources
only when necessary. We don't want every file in the filesystem to be determined
before the data is displayed. Instead, only the files and directories that the
tree element (or other elements) will need to display at a given time will be
determined.
</P>

<H3>Composite Datasources</H3>

<P>
You can specify multiple datasources in the <SPAN CLASS="attrib">datasources</SPAN>
attribute by separating them with whitespace as in the example below. This has the
effect of reading the data from all the datasources mentioned.
</P>


<DIV CLASS="sample"><PRE>
&lt;tree datasources="rdf:bookmarks rdf:history animals.rdf" ref="NC:BookmarksRoot"&gt;</PRE></DIV>



<P>
This example reads the resources from the bookmarks, history and the animals.rdf
file. They are combined into a single composite datasource and can be used as if they
were one.
</P>

<P>
The special datasource <SPAN CLASS="attrib">rdf:null</SPAN> corresponds to nothing.
You can use this datasource if you want to dynamically set the datasource using a
script, but don't want one initially or don't know its exact URL.
</P>

<H3>Custom RDF Datasources</H3>

<P>
You can use any of the above internal datasources if you wish. There are several
others for mail, address books and searching and so on. However, you might want to
use your own RDF datasource stored in an RDF file. The file can be either a local
file or a remote file. Just put the URL of the RDF file in the
<SPAN CLASS="attrib">datasources</SPAN> attribute.

<P>
Using RDF files provides just as much functionality as any of the internal
datasources. You can use rules to match specific types of content. The attributes
on the <A CLASS="tag" HREF="elemref/ref_rule.html">rule</A> element will match if they
match the attributes on an RDF <SPAN CLASS=" tag">Description</SPAN> element.
You can also create RDF files that are hierarchical.
</P>

<P>
The following is an example of how an RDF file can be used as a datasource. The
RDF file is fairly large and can be viewed separately:
<A HREF="animals.txt">Source</A> <A HREF="animals.rdf">RDF</A> 
</P>


Example 9.4.2:
<A HREF='examples/ex_datasrc_2.xul.txt'>Source</A>
<A HREF="examples/ex_datasrc_2.xul" ONCLICK="window.open('examples/ex_datasrc_2.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;tree flex="1" width="200" height="200"
      datasources="animals.rdf" ref="http://www.some-fictitious-zoo.com/all-animals"&gt;

  &lt;treecols&gt;
    &lt;treecol id="name" label="Name" primary="true" flex="1"/&gt;
    &lt;treecol id="species" label="Species" flex="1"/&gt;
  &lt;/treecols&gt;

  &lt;template&gt;
    &lt;rule&gt;
      &lt;treechildren&gt;
       &lt;treeitem uri="rdf:*"&gt;
         &lt;treerow&gt;
           &lt;treecell label="rdf:http://www.some-fictitious-zoo.com/rdf#name"/&gt;
           &lt;treecell label="rdf:http://www.some-fictitious-zoo.com/rdf#species"/&gt;
         &lt;/treerow&gt;
       &lt;/treeitem&gt;
      &lt;/treechildren&gt;
    &lt;/rule&gt;

  &lt;/template&gt;
&lt;/tree&gt;</PRE></DIV>



<P ALIGN="CENTER">
<IMG SRC="images/datasrc1.jpg" ALT="" WIDTH=414 HEIGHT=333>
</P>

<P>
Here, the data has been generated from the file. The
<SPAN CLASS="attrib">ref</SPAN> attribute has been set to the root element in
the RDF file, which is the top-level <SPAN CLASS=" tag">Seq</SPAN>.
This will give us a complete list of animals. If we wanted to, we could set the
<SPAN CLASS="attrib">ref</SPAN> attribute to any of the other
<SPAN CLASS="attrib">about</SPAN> attribute values to limit the set of data that
is returned. For example, to display only the reptiles, use a value of
<SPAN CLASS="aval">http://www.some-fictitious-zoo.com/reptiles</SPAN>.
</P>

<P>
The example below shows how to display a particular piece of an RDF datasource
by setting the <SPAN CLASS="attrib">ref</SPAN> attribute.
</P>


Example 9.4.3:
<A HREF='examples/ex_datasrc_3.xul.txt'>Source</A>
<A HREF="examples/ex_datasrc_3.xul" ONCLICK="window.open('examples/ex_datasrc_3.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;window
  id="example-window"
  title="History List"
  xmlns:ANIMALS="http://www.some-fictitious-zoo.com/rdf#"
  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"&gt;

&lt;button label="Click here to see the mammals the zoo has" type="menu"
        datasources="animals.rdf" ref="http://www.some-fictitious-zoo.com/mammals"&gt;
  &lt;template&gt;
    &lt;rule ANIMALS:specimens="0"&gt;&lt;/rule&gt;
    &lt;rule&gt;
      &lt;menupopup&gt;
        &lt;menuitem uri="rdf:*" label="rdf:http://www.some-fictitious-zoo.com/rdf#name"/&gt;
      &lt;/menupopup&gt;
    &lt;/rule&gt;
  &lt;/template&gt;
&lt;/button&gt;

&lt;/window&gt;</PRE></DIV>



<P>
In this case only the mammals are desired, so we select the URI of the mammals
list. You will notice that the value of the <SPAN CLASS="attrib">ref</SPAN>
attribute in the example is
<SPAN CLASS="aval">http://www.some-fictitious-zoo.com/mammals</SPAN> which
corresponds to one of the <SPAN CLASS=" tag">Seq</SPAN> elements in the
<A HREF="animals.txt">RDF file</A>. This causes only the descendants of this
list to be returned.
</P>

<P>
Two rules have been used here. The first rule catches all the resources that have
their <SPAN CLASS="attrib">ANIMALS:specimens</SPAN> attribute set to
<SPAN CLASS="aval">0</SPAN>. You can see this attribute in the RDF file on each of
the <SPAN CLASS=" tag">Description</SPAN> elements. Some of them have a value of 0.
So in these cases, rule one will match. Because rule one has no content, nothing
will be displayed for these ones. This is an effective way to hide data that we
don't want to display.
</P>

<P>
The second rule applies to all other resources and creates a row in a popup menu.
The end effect is that we get a popup menu containing all the mammals which have
a specimen that is not 0.
</P>

<HR>
<P>
<A HREF="advrules.html">(Next)</A>
Next, we'll look at the full rule syntax.

</P>
<P>

Examples:
  <A HREF='examples/ex_datasrc_1.xul.txt'>9.4.1</A>
  <A HREF='examples/ex_datasrc_2.xul.txt'>9.4.2</A>
  <A HREF='examples/ex_datasrc_3.xul.txt'>9.4.3</A>
</P>
</div>

<div class="navlinks-pnc">

  <a class="prevlink" title="9.3 - Trees and Templates"
     href="treetempl.html">Previous</a>


  <a class="nextlink" title="9.5 - Advanced Rules"
     href="advrules.html">Next</a>

</div>

</div>

<hr class="edgesplit">

<div id="copyblock">
  Copyright (C) 1999 - 2004 XulPlanet.com
</div>

</body>
</html>

