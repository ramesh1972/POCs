<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="stylesheet" title="Default Style" href="styles/default/main.css" type="text/css">
<link rel="stylesheet" href="styles/default/xultu.css" type="text/css">


<link rel="stylesheet" href="styles/default/xultu-print.css" type="text/css" media="print">


<link rel="home"   href="http://www.xulplanet.com/"            title="http://www.XulPlanet.com/">
<link rel="search" href="http://www.xulplanet.com/cgi-bin/search/search.cgi" title="Search XulPlanet">
<link rel="author" href="http://www.xulplanet.com/ndeakin" title="Neil Deakin">
 <link rel="up" href="http://www.xulplanet.com/tutorials/" title="Up"> 
 <link rel="first" href="intro.html" title="First"> 
 <link rel="last" href="end.html" title="Last"> 

 <link rel="prev" href="style.html"> 
 <link rel="next" href="defskin.html"> 

<meta name="Description" content="Step by step tutorial of the XML User Interface Language">

<title>XulPlanet.com - Styling a Tree</title>

</head>
<body>

<div id="header">
  <a href="http://www.xulplanet.com/">
    <img id="logo" src="images/xulplanet.png" width="215" height="65" alt="XUL Planet">
  </a>

<div id="locationlinks">
  <a href="http://www.xulplanet.com/">Home</a> &gt;

  <a href="http://www.xulplanet.com/tutorials/">Tutorials</a> :


  <a href="index.html">XUL Tutorial</a> :



 10.2 - Styling a Tree 
</div>



</div>



<hr class="edgesplit">

<div id="sidebar">

<div id="search">
  <form action="/cgi-bin/search/search.cgi" method="get">
    Search:<br>
    <input id="search-box" name="Terms" type="text">
    <input type="submit" value="Go">
  </form>
</div>

<hr>

<ul class="sidebar-section-links">
  <li><a href="http://www.xulplanet.com/tutorials/xultu/allofit.zip">Single Document Version</a></li>
  <li><a href="http://www.xulplanet.com/tutorials/xultu/xultu.zip">Download the XUL Tutorial</a><br></li>
  <li><a href="http://www.xulplanet.com/references/elemref/">Element Reference</a></li>
  <li><a href="http://www.xulplanet.com/references/elemref/quickref.html">Quick Reference</a><br></li>
  <li><a href="keyref.html">Key Code Reference</a></li>
  <li><a href="templateex.html">Template Syntax Examples</a></li>
</ul>

<hr>



<OL id="sidebar-docs-index">
  <LI class="sidebar-section-title">Introduction
  <OL>
    <LI> <A HREF="intro.html">Introduction</A></LI>
    <LI> <A HREF="xulfile.html">XUL Structure</A></LI>
    <LI> <A HREF="chromeurl.html">The Chrome URL</A></LI>
    <LI> <A HREF="packaging.html">Contents.rdf Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Simple Elements
  <OL>
    <LI> <A HREF="window.html">Creating a Window</A></LI>
    <LI> <A HREF="buttons.html">Adding Buttons</A></LI>
    <LI> <A HREF="textimage.html">Adding Labels and Images</A></LI>
    <LI> <A HREF="inputs.html">Input Controls</A></LI>
    <LI> <A HREF="lists.html">List Controls</A></LI>
    <LI> <A HREF="progress.html">Progress Meters</A></LI>
    <LI> <A HREF="htmlelem.html">Adding HTML Elements</A></LI>
    <LI> <A HREF="springs.html">Using Spacers</A></LI>
    <LI> <A HREF="advbtns.html">More Button Features</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">The Box Model
  <OL>
    <LI> <A HREF="boxes.html">The Box Model</A></LI>
    <LI> <A HREF="boxstyle.html">Element Positioning</A></LI>
    <LI> <A HREF="boxdet.html">Box Model Details</A></LI>
    <LI> <A HREF="titledbox.html">Groupboxes</A></LI>
    <LI> <A HREF="boxfinal.html">Adding More Elements</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">More Layout Elements
  <OL>
    <LI> <A HREF="stacks.html">Stacks and Decks</A></LI>
    <LI> <A HREF="bulletins.html">Stack Positioning</A></LI>
    <LI> <A HREF="tabpanel.html">Tabboxes</A></LI>
    <LI> <A HREF="grids.html">Grids</A></LI>
    <LI> <A HREF="cpanels.html">Content Panels</A></LI>
    <LI> <A HREF="splitter.html">Splitters</A></LI>
    <LI> <A HREF="scroll.html">Scroll Bars</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Toolbars and Menus
  <OL>
    <LI> <A HREF="toolbar.html">Toolbars</A></LI>
    <LI> <A HREF="menubar.html">Simple Menu Bars</A></LI>
    <LI> <A HREF="advmenu.html">More Menu Features</A></LI>
    <LI> <A HREF="popups.html">Popup Menus</A></LI>
    <LI> <A HREF="menuscroll.html">Scrolling Menus</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Events and Scripts
  <OL>
    <LI> <A HREF="events.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="advevents.html">More Event Handlers</A></LI>
    <LI> <A HREF="keyshort.html">Keyboard Shortcuts</A></LI>
    <LI> <A HREF="focus.html">Focus and Selection</A></LI>
    <LI> <A HREF="commands.html">Commands</A></LI>
    <LI> <A HREF="commandupdate.html">Updating Commands</A></LI>
    <LI> <A HREF="broadob.html">Broadcasters and Observers</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Document Object Model
  <OL>
    <LI> <A HREF="dom.html">Document Object Model</A></LI>
    <LI> <A HREF="dommodify.html">Modifying a XUL Interface</A></LI>
    <LI> <A HREF="domlists.html">Manipulating Lists</A></LI>
    <LI> <A HREF="boxobject.html">Box Objects</A></LI>
    <LI> <A HREF="xpcom.html">XPCOM Interfaces</A></LI>
    <LI> <A HREF="xpcomex.html">XPCOM Examples</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Trees
  <OL>
    <LI> <A HREF="trees.html">Trees</A></LI>
    <LI> <A HREF="advtrees.html">More Tree Features</A></LI>
    <LI> <A HREF="seltree.html">Tree Selection</A></LI>
    <LI> <A HREF="treeview.html">Custom Tree Views</A></LI>
    <LI> <A HREF="treeviewdet.html">Tree View Details</A></LI>
    <LI> <A HREF="treeboxobject.html">Tree Box Objects</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">RDF and Templates
  <OL>
    <LI> <A HREF="intrordf.html">Introduction to RDF</A></LI>
    <LI> <A HREF="templates.html">Templates</A></LI>
    <LI> <A HREF="treetempl.html">Trees and Templates</A></LI>
    <LI> <A HREF="datasrc.html">RDF Datasources</A></LI>
    <LI> <A HREF="advrules.html">Advanced Rules</A></LI>
    <LI> <A HREF="persist.html">Persistent Data</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Skins and Locales
  <OL>
    <LI> <A HREF="style.html">Adding Style Sheets</A></LI>
    <LI> <SPAN CLASS="currentpage">Styling a Tree</SPAN></LI>
    <LI> <A HREF="defskin.html">Modifying the Default Skin</A></LI>
    <LI> <A HREF="cskin.html">Creating a Skin</A></LI>
    <LI> <A HREF="locale.html">Localization</A></LI>
    <LI> <A HREF="locprops.html">Property Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Bindings
  <OL>
    <LI> <A HREF="introxbl.html">Introduction to XBL</A></LI>
    <LI> <A HREF="xblcontent.html">Anonymous Content</A></LI>
    <LI> <A HREF="xblatin.html">XBL Attribute Inheritance</A></LI>
    <LI> <A HREF="xblprops.html">Adding Properties</A></LI>
    <LI> <A HREF="xblmethods.html">Adding Methods</A></LI>
    <LI> <A HREF="xblevents.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="xblinherit.html">XBL Inheritance</A></LI>
    <LI> <A HREF="xblex.html">XBL Example</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Specialized Window Types
  <OL>
    <LI> <A HREF="featwin.html">Features of a Window</A></LI>
    <LI> <A HREF="dialogs.html">Creating Dialogs</A></LI>
    <LI> <A HREF="filedialog.html">Open and Save Dialogs</A></LI>
    <LI> <A HREF="wizard.html">Creating a Wizard</A></LI>
    <LI> <A HREF="advwiz.html">More Wizards</A></LI>
    <LI> <A HREF="overlay.html">Overlays</A></LI>
    <LI> <A HREF="crosspov.html">Cross Package Overlays</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Installation
  <OL>
    <LI> <A HREF="xpinstall.html">Creating an Installer</A></LI>
    <LI> <A HREF="xpiscript.html">Install Scripts</A></LI>
    <LI> <A HREF="xpiadv.html">Additional Install Features</A></LI>
  </OL>
</OL>

</div>



<div id="content">

<div class="navlinks-pnc">

  <a class="prevlink" title="10.1 - Adding Style Sheets"
     href="style.html">Previous</a>


  <a class="nextlink" title="10.3 - Modifying the Default Skin"
     href="defskin.html">Next</a>

</div>

<div class="xultu-content">

<h2>Styling a Tree</h2>

<P>
The following describes how to style a tree.
</P>

<H3>Styling the Tree</H3>

<P>
You can style the tree border and the column headers in the same way as other
elements. Style added to the <A CLASS="tag" HREF="elemref/ref_tree.html">tree</A> element will apply
to the entire tree. Adding a style to the <A CLASS="tag" HREF="elemref/ref_treecol.html">treecol</A>
element does not cause the style to be applied to the column but only to the
header.
</P>

<P>
The body of the tree must be styled in a somewhat different way than
other elements. This is because the tree body is stored in a different way to
other elements. The outer <A CLASS="tag" HREF="elemref/ref_treechildren.html">treechildren</A> is the
only real element in the tree body. The inner elements are just placeholders.
</P>

<P>
Instead, you must use the <SPAN CLASS="attrib">properties</SPAN> attribute on
the rows or cells to set one or more named properties. This can be used with
trees with static content, RDF built content or with those with a custom view.
Let's say we want to give a particular row have a blue background color. This
would be used to implement Mozilla Mail's labels feature. We'll use a property
called 'makeItBlue'. You can use whatever name you want. You can set multiple
properties by separating them with spaces.
</P>

<P>
Set the property on a row or cell, as in the following example:
</P>


<DIV CLASS="sample"><PRE>&lt;treerow properties="makeItBlue"&gt;</PRE></DIV>



<P>
The style sheet can take this property and use it to change the appearance of
the row for unread messages or labels. You can think of the properties as
functioning much like style classes, although they require a somewhat more
complex syntax to use in a style sheet. This is because you can specify the
style for a number of parts of the cell individually. You can style not only
the cell and its text, but the twisty and indentation. The following is the
syntax that needs to be used:
</P>


<DIV CLASS="sample"><PRE>treechildren::-moz-tree-row(makeItBlue)
{
  background-color: blue;
}</PRE></DIV>



<P>
This extra pseudostyle is used to style the background color of rows that have
the 'makeItBlue' property. This special syntax is needed because the cells
themselves are not separate elements. All of the content inside the tree's body
is rendered by the <A CLASS="tag" HREF="elemref/ref_treechildren.html">treechildren</A> element. (Note the
treechildren is being styled in the rule above.) The pseudostyle sets style
rules for particular parts of what it displays. This style rule means, inside a
treechildren element, set the background color to blue for all tree rows that
have the 'makeItBlue' property.
</P>

<P>
The text '::-moz-tree-row' specifies what content area is desired,
which in this case is a row. You can also use the following values:

<UL>
  <LI><B>::-moz-tree-cell</B>: a cell. Use this to set borders and background
      colors.</LI>
  <LI><B>::-moz-tree-cell-text</B>: the text in a cell. Use this to set the
      font and text color.</LI>
  <LI><B>::-moz-tree-twisty</B>: the appearance of the twisty used to expand
      and collapse child rows.</LI>
  <LI><B>::-moz-tree-image</B>: the image for a cell. You can set the image
      with the <SPAN CLASS="attrib">list-style-image</SPAN> property.</LI>
  <LI><B>::-moz-tree-row</B>: a row. Use this to set the background color of
      a row.</LI>
  <LI><B>::-moz-tree-indentation</B>: the indentation to the left of rows
      that are children of other rows.</LI>
  <LI><B>::-moz-tree-column</B>: a column.</LI>
  <LI><B>::-moz-tree-line</B>: the lines that are drawn to connect child rows
      to parent rows.</LI>
  <LI><B>::-moz-tree-separator</B>: a separator in a tree.</LI>
  <LI><B>::-moz-tree-progressmeter</B>: content for progressmeter cells. You
      can create a progressmeter column by setting the
      <SPAN CLASS="attrib">type</SPAN> attribute on the column to
      <SPAN CLASS="aval">progressmeter</SPAN>.</LI>
  <LI><B>::-moz-tree-drop-feedback</B>: the drag and drop feedback.</LI>
</UL>

<P>
You can check for multiple properties by separating them with commas. The
example below sets the background color to grey for rows that have the
'readonly' and 'unread' properties. For properties that are 'readonly', it
adds a red border around the row. Note that the first rule will apply to
any row that is 'readonly' regardless of whether other properties such
as 'unread' are set.
</P>


<DIV CLASS="sample"><PRE>treechildren::-moz-tree-row(readonly)
{
  border: 1px solid red;
}

treechildren::-moz-tree-row(readonly, unread)
{
  background-color: rgb(80%, 80%, 80%);
}</PRE></DIV>



<P>
The properties list for tree elements contain a small number of default
properties, which you can also use in a style sheet. You can use these extra
properties to set the appearance of containers or selected rows. The following
properties are automatically set as needed:
</P>

<UL>
  <LI><B>focus</B>: this property is set if the tree currently has the focus.</LI>
  <LI><B>selected</B>: this property is set for rows or cells that are currently selected.</LI>
  <LI><B>current</B>: this property is set if the cursor is at the row. Only
      one row will have this property set at a time.</LI>
  <LI><B>container</B>: this property is set for rows or cells that have child rows.</LI>
  <LI><B>leaf</B>: this property is set for rows or cells that do not have child rows.</LI>
  <LI><B>open</B>: this property is set for rows or cells which are expanded.</LI>
  <LI><B>closed</B>: this property is set for rows or cells which are collapsed.</LI>
  <LI><B>primary</B>: this property is set for cells in the primary column.</LI>
  <LI><B>sorted</B>: this property is set for cells in the current sorted column.</LI>
  <LI><B>even</B>: this property is set for even numbered rows.
  <LI><B>odd</B>: this property is set for odd numbered rows. This property, along
      with the even property allow you to set, for example, alternating colors for
      each row.</LI>
  <LI><B>dragSession</B>: this property is set if something is currently being dragged.</LI>
  <LI><B>dropOn</B>: if a drag is occuring over the tree, this property is set
      for the row currently being dragged over, as long as the mouse pointer is
      hovering over the row.</LI>
  <LI><B>dropBefore</B>: this property is set if the mouse pointer is hovering
      before the row currently being dragged over.</LI>
  <LI><B>dropAfter</B>: this property is set if the mouse pointer is hovering
      after the row currently being dragged over.</LI>
  <LI><B>progressNormal</B>: this property is set for progress meter cells.</LI>
  <LI><B>progressUndetermined</B>: this property is set for undeterminate progress meter cells.</LI>
  <LI><B>progressNone</B>: this property is set for non-progress meter cells.</LI>
</UL>

<P>
The properties are set for rows or cells in rows with the necessary state. For
columns and cells, one additional property, the <SPAN CLASS="attrib">id</SPAN> of
the column or column the cell is in will be set.
</P>

<P>
For RDF-built trees, you can use the same syntax. However, you will often set
the properties based on values in the datasource.
</P>

<P>
For trees with a custom view script, you can set properties by supplying the
functions 'getRowProperties', 'getColumnProperties' and 'getCellProperties'
in the view. These return information about an individual row, column and cell.
Arguments to these functions indicate which row and/or column. The last argument
to each of these functions is a properties list which the view is expected to fill
with a list of properties. The function 'getColumnProperties' also supplies the
corresponding <A CLASS="tag" HREF="elemref/ref_treecol.html">treecol</A> element for the column.
</P>


<DIV CLASS="sample"><PRE>getRowProperties : function(row,prop){}
getColumnProperties : function(column,columnElement,prop){}
getCellProperties : function(row,column,prop){}</PRE></DIV>



<P>
Let's look at an example of changing a specific cell. Let's make every fourth
row have blue text, using the example from a previous section. We'll need to
add code to the getCellProperties function, to add a property 'makeItBlue' for
cells in every fourth row. (We don't use getRowProperties as the text color
will not be inherited into each cell.)
</P>

<P>
The properties object that is passed as the last argument to the getCellProperties
is an XPCOM object that implements nsISupportsArray. It is really just an XPCOM
version of an array. It contains a function AppendElement which can be used to
add an element to the array. We can use the interface nsIAtomService to constuct
string atoms for the properties.
</P>


<DIV CLASS="sample"><PRE>getCellProperties: function(row,col,props){
  if ((row %4) == 0){
    var aserv=Components.classes["@mozilla.org/atom-service;1"].
              getService(Components.interfaces.nsIAtomService);
    props.AppendElement(aserv.getAtom("makeItBlue"));
  }
}</PRE></DIV>



<P>
This function would be defined as part of a view object. It first checks
to see which row is being requested and sets a property for cells in every
fourth row. The properties list requires an array of atom objects, which
can be thought of as constant strings. We create them using the XPCOM
interface nsIAtomService and add them to the array using the AppendElement
function. Here, we create an atom 'makeItBlue'. You can call AppendElement
again to add additional properties.
</P>

<HR>
<P>
<A HREF="defskin.html">(Next)</A>
Next, we'll look at how to modify the default skin.

</P>
</div>

<div class="navlinks-pnc">

  <a class="prevlink" title="10.1 - Adding Style Sheets"
     href="style.html">Previous</a>


  <a class="nextlink" title="10.3 - Modifying the Default Skin"
     href="defskin.html">Next</a>

</div>

</div>

<hr class="edgesplit">

<div id="copyblock">
  Copyright (C) 1999 - 2004 XulPlanet.com
</div>

</body>
</html>

