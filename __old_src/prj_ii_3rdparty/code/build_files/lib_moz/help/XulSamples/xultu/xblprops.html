<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="stylesheet" title="Default Style" href="styles/default/main.css" type="text/css">
<link rel="stylesheet" href="styles/default/xultu.css" type="text/css">


<link rel="stylesheet" href="styles/default/xultu-print.css" type="text/css" media="print">


<link rel="home"   href="http://www.xulplanet.com/"            title="http://www.XulPlanet.com/">
<link rel="search" href="http://www.xulplanet.com/cgi-bin/search/search.cgi" title="Search XulPlanet">
<link rel="author" href="http://www.xulplanet.com/ndeakin" title="Neil Deakin">
 <link rel="up" href="http://www.xulplanet.com/tutorials/" title="Up"> 
 <link rel="first" href="intro.html" title="First"> 
 <link rel="last" href="end.html" title="Last"> 

 <link rel="prev" href="xblatin.html"> 
 <link rel="next" href="xblmethods.html"> 

<meta name="Description" content="Step by step tutorial of the XML User Interface Language">

<title>XulPlanet.com - Adding Properties</title>

</head>
<body>

<div id="header">
  <a href="http://www.xulplanet.com/">
    <img id="logo" src="images/xulplanet.png" width="215" height="65" alt="XUL Planet">
  </a>

<div id="locationlinks">
  <a href="http://www.xulplanet.com/">Home</a> &gt;

  <a href="http://www.xulplanet.com/tutorials/">Tutorials</a> :


  <a href="index.html">XUL Tutorial</a> :



 11.4 - Adding Properties 
</div>



</div>



<hr class="edgesplit">

<div id="sidebar">

<div id="search">
  <form action="/cgi-bin/search/search.cgi" method="get">
    Search:<br>
    <input id="search-box" name="Terms" type="text">
    <input type="submit" value="Go">
  </form>
</div>

<hr>

<ul class="sidebar-section-links">
  <li><a href="http://www.xulplanet.com/tutorials/xultu/allofit.zip">Single Document Version</a></li>
  <li><a href="http://www.xulplanet.com/tutorials/xultu/xultu.zip">Download the XUL Tutorial</a><br></li>
  <li><a href="http://www.xulplanet.com/references/elemref/">Element Reference</a></li>
  <li><a href="http://www.xulplanet.com/references/elemref/quickref.html">Quick Reference</a><br></li>
  <li><a href="keyref.html">Key Code Reference</a></li>
  <li><a href="templateex.html">Template Syntax Examples</a></li>
</ul>

<hr>



<OL id="sidebar-docs-index">
  <LI class="sidebar-section-title">Introduction
  <OL>
    <LI> <A HREF="intro.html">Introduction</A></LI>
    <LI> <A HREF="xulfile.html">XUL Structure</A></LI>
    <LI> <A HREF="chromeurl.html">The Chrome URL</A></LI>
    <LI> <A HREF="packaging.html">Contents.rdf Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Simple Elements
  <OL>
    <LI> <A HREF="window.html">Creating a Window</A></LI>
    <LI> <A HREF="buttons.html">Adding Buttons</A></LI>
    <LI> <A HREF="textimage.html">Adding Labels and Images</A></LI>
    <LI> <A HREF="inputs.html">Input Controls</A></LI>
    <LI> <A HREF="lists.html">List Controls</A></LI>
    <LI> <A HREF="progress.html">Progress Meters</A></LI>
    <LI> <A HREF="htmlelem.html">Adding HTML Elements</A></LI>
    <LI> <A HREF="springs.html">Using Spacers</A></LI>
    <LI> <A HREF="advbtns.html">More Button Features</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">The Box Model
  <OL>
    <LI> <A HREF="boxes.html">The Box Model</A></LI>
    <LI> <A HREF="boxstyle.html">Element Positioning</A></LI>
    <LI> <A HREF="boxdet.html">Box Model Details</A></LI>
    <LI> <A HREF="titledbox.html">Groupboxes</A></LI>
    <LI> <A HREF="boxfinal.html">Adding More Elements</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">More Layout Elements
  <OL>
    <LI> <A HREF="stacks.html">Stacks and Decks</A></LI>
    <LI> <A HREF="bulletins.html">Stack Positioning</A></LI>
    <LI> <A HREF="tabpanel.html">Tabboxes</A></LI>
    <LI> <A HREF="grids.html">Grids</A></LI>
    <LI> <A HREF="cpanels.html">Content Panels</A></LI>
    <LI> <A HREF="splitter.html">Splitters</A></LI>
    <LI> <A HREF="scroll.html">Scroll Bars</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Toolbars and Menus
  <OL>
    <LI> <A HREF="toolbar.html">Toolbars</A></LI>
    <LI> <A HREF="menubar.html">Simple Menu Bars</A></LI>
    <LI> <A HREF="advmenu.html">More Menu Features</A></LI>
    <LI> <A HREF="popups.html">Popup Menus</A></LI>
    <LI> <A HREF="menuscroll.html">Scrolling Menus</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Events and Scripts
  <OL>
    <LI> <A HREF="events.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="advevents.html">More Event Handlers</A></LI>
    <LI> <A HREF="keyshort.html">Keyboard Shortcuts</A></LI>
    <LI> <A HREF="focus.html">Focus and Selection</A></LI>
    <LI> <A HREF="commands.html">Commands</A></LI>
    <LI> <A HREF="commandupdate.html">Updating Commands</A></LI>
    <LI> <A HREF="broadob.html">Broadcasters and Observers</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Document Object Model
  <OL>
    <LI> <A HREF="dom.html">Document Object Model</A></LI>
    <LI> <A HREF="dommodify.html">Modifying a XUL Interface</A></LI>
    <LI> <A HREF="domlists.html">Manipulating Lists</A></LI>
    <LI> <A HREF="boxobject.html">Box Objects</A></LI>
    <LI> <A HREF="xpcom.html">XPCOM Interfaces</A></LI>
    <LI> <A HREF="xpcomex.html">XPCOM Examples</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Trees
  <OL>
    <LI> <A HREF="trees.html">Trees</A></LI>
    <LI> <A HREF="advtrees.html">More Tree Features</A></LI>
    <LI> <A HREF="seltree.html">Tree Selection</A></LI>
    <LI> <A HREF="treeview.html">Custom Tree Views</A></LI>
    <LI> <A HREF="treeviewdet.html">Tree View Details</A></LI>
    <LI> <A HREF="treeboxobject.html">Tree Box Objects</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">RDF and Templates
  <OL>
    <LI> <A HREF="intrordf.html">Introduction to RDF</A></LI>
    <LI> <A HREF="templates.html">Templates</A></LI>
    <LI> <A HREF="treetempl.html">Trees and Templates</A></LI>
    <LI> <A HREF="datasrc.html">RDF Datasources</A></LI>
    <LI> <A HREF="advrules.html">Advanced Rules</A></LI>
    <LI> <A HREF="persist.html">Persistent Data</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Skins and Locales
  <OL>
    <LI> <A HREF="style.html">Adding Style Sheets</A></LI>
    <LI> <A HREF="treestyle.html">Styling a Tree</A></LI>
    <LI> <A HREF="defskin.html">Modifying the Default Skin</A></LI>
    <LI> <A HREF="cskin.html">Creating a Skin</A></LI>
    <LI> <A HREF="locale.html">Localization</A></LI>
    <LI> <A HREF="locprops.html">Property Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Bindings
  <OL>
    <LI> <A HREF="introxbl.html">Introduction to XBL</A></LI>
    <LI> <A HREF="xblcontent.html">Anonymous Content</A></LI>
    <LI> <A HREF="xblatin.html">XBL Attribute Inheritance</A></LI>
    <LI> <SPAN CLASS="currentpage">Adding Properties</SPAN></LI>
    <LI> <A HREF="xblmethods.html">Adding Methods</A></LI>
    <LI> <A HREF="xblevents.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="xblinherit.html">XBL Inheritance</A></LI>
    <LI> <A HREF="xblex.html">XBL Example</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Specialized Window Types
  <OL>
    <LI> <A HREF="featwin.html">Features of a Window</A></LI>
    <LI> <A HREF="dialogs.html">Creating Dialogs</A></LI>
    <LI> <A HREF="filedialog.html">Open and Save Dialogs</A></LI>
    <LI> <A HREF="wizard.html">Creating a Wizard</A></LI>
    <LI> <A HREF="advwiz.html">More Wizards</A></LI>
    <LI> <A HREF="overlay.html">Overlays</A></LI>
    <LI> <A HREF="crosspov.html">Cross Package Overlays</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Installation
  <OL>
    <LI> <A HREF="xpinstall.html">Creating an Installer</A></LI>
    <LI> <A HREF="xpiscript.html">Install Scripts</A></LI>
    <LI> <A HREF="xpiadv.html">Additional Install Features</A></LI>
  </OL>
</OL>

</div>



<div id="content">

<div class="navlinks-pnc">

  <a class="prevlink" title="11.3 - XBL Attribute Inheritance"
     href="xblatin.html">Previous</a>


  <a class="nextlink" title="11.5 - Adding Methods"
     href="xblmethods.html">Next</a>

</div>

<div class="xultu-content">

<h2>Adding Properties</h2>

<P>
Next, we'll find out how to add custom properties to XBL-defined elements.
</P>

<H3>The XBL Interface</H3>

<P>
JavaScript and the DOM provide access to get and set the properties of elements.
With XBL, you can define your own properties for the elements you create. You
can also add methods that can be called. That way, all you need is to get a
reference to the element (using GetElementById or a similar function) and then
get or set the additional properties and call the methods on it. 
</P>

<P>
There are three types of items you can add. Fields are used to hold a simple value.
Properties can also be used to hold a value but may have code execute when an
attempt is made to retrieve or modify the value. Methods are functions which may
be executed.
</P>

<P>
All three are defined within an <A CLASS="tag" HREF="elemref/ref_xblimplementation.html">implementation</A>
element, which should be a child of the <A CLASS="tag" HREF="elemref/ref_xblbinding.html">binding</A> element.
Within the implementation, you define individual <A CLASS="tag" HREF="elemref/ref_xblfield.html">field</A>,
<A CLASS="tag" HREF="elemref/ref_xblproperty.html">property</A>, and <A CLASS="tag" HREF="elemref/ref_xblmethod.html">method</A> elements,
one for each one that you want. The general syntax is as follows:
</P>


<DIV CLASS="sample"><PRE>&lt;binding id="element-name"&gt;
  &lt;content&gt;
    -- content goes here --
  &lt;/content&gt;
  &lt;implementation&gt;
    &lt;field name="field-name-1"/&gt;
    &lt;field name="field-name-2"/&gt;
    &lt;field name="field-name-3"/&gt;

    &lt;property name="property-name-1"/&gt;
    &lt;property name="property-name-2"/&gt;
    &lt;property name="property-name-3"/&gt;
    .
    .
    .
    &lt;method name="method-name-1/&gt;
      -- method content goes here --
    &lt;/method&gt;
    .
    .
    .
  &lt;/implementation&gt;
&lt;/binding&gt;</PRE></DIV>



<H3>Fields</H3>

<P>
Each field is defined using the <A CLASS="tag" HREF="elemref/ref_xblfield.html">field</A> element.
Often, fields would correspond to an attribute placed on the element such
as <SPAN CLASS="attrib">label</SPAN> or <SPAN CLASS="attrib">disabled</SPAN>, but
they do not have to.
</P>

<P>
The <SPAN CLASS="attrib">name</SPAN> attribute on the
<A CLASS="tag" HREF="elemref/ref_xblfield.html">field</A> element is used to indicate the name of
the field. You can use the name from a script to get and set the value.
The example below creates a button which generates and stores a random
number. You can retrieve this same number multiple times by getting the
<SPAN CLASS="attrib">number</SPAN> property from the button. Most of the
work here is done in the <SPAN CLASS="attrib">oncommand</SPAN> handlers. Later, 
we'll find out how to move this to XBL.
</P>


<DIV CLASS="sample"><PRE><B>XUL:</B>

&lt;box id="random-box" class="randomizer"/&gt;

&lt;button label="Generate"
           oncommand="document.getElementById('random-box').number=Math.random();"/&gt;
&lt;button label="Show"
           oncommand="alert(document.getElementById('random-box').number)"/&gt;

<B>XBL:</B>

&lt;binding id="randomizer"&gt;
  &lt;implementation&gt;
    &lt;field name="number"/&gt;
  &lt;/implementation&gt;
&lt;/binding&gt;</PRE></DIV>



<P>
A <SPAN CLASS="attrib">number</SPAN> field has been defined in the binding,
which stores the random number. The two extra buttons set and get the value of
this field. The syntax is very similar to getting and setting the properties
of HTML elements. In this example, no content has been placed inside either
the XUL box or its definition in XBL, which is perfectly valid.
</P>

<P>
This example isn't quite correct because the field is not assigned a default
value. To do this, add the default value as the content of the
<A CLASS="tag" HREF="elemref/ref_xblfield.html">field</A> tag. For example:
</P>


<DIV CLASS="sample"><PRE>&lt;field name="number"&gt;
  25
&lt;/field&gt;</PRE></DIV>



<P>
This will assign the value 25 as the default value of the number field.
Actually, you can instead place a script inside the
<A CLASS="tag" HREF="elemref/ref_xblfield.html">field</A> tag that evaluates to the default value.
That might be necessary if the value needs to be computed. For example, the
following field is given a default value equal to the current time:
</P>


<DIV CLASS="sample"><PRE>&lt;field name="currentTime"&gt;
  new Date().getTime();
&lt;/field&gt;</PRE></DIV>



<H3>Properties</H3>

<P>
Sometimes you will want to validate the data that is assigned to a property.
Or, you may want the value to be calculated dynamically as it's asked for. For
example, if you want a property that holds the current time, you would want
to have its value generated as needed. In these cases, you need to use a
<A CLASS="tag" HREF="elemref/ref_xblproperty.html">property</A> tag instead of a 
<A CLASS="tag" HREF="elemref/ref_xblfield.html">field</A> tag. Its syntax is similar but has additional
features.
</P>

<P>
You can use the <SPAN CLASS="attrib">onget</SPAN> and
<SPAN CLASS="attrib">onset</SPAN> attributes to have code execute when the
property is retrieved or modified. Add each to the
<A CLASS="tag" HREF="elemref/ref_xblproperty.html">property</A> element and set its value to a script
which either gets or sets the value of the property.
</P>

<P>
For example, you could assign a script to the value of
<SPAN CLASS="attrib">onget</SPAN> to calculate the current time. Whenever
a script attempts to access the value of the property, the 
<SPAN CLASS="attrib">onget</SPAN> script will be called to retrieve the value.
The script should return the value that should be treated as the value of
that property.
</P>

<P>
The <SPAN CLASS="attrib">onset</SPAN> handler is similar but is called whenever
a script attempts to assign a new value to the property. This script should
store the value somewhere, or validate the value. For example, some
properties might only be able to store numbers. Attempting to assign
alphabetic text to such a property should fail.
</P>


<DIV CLASS="sample"><PRE>&lt;property name="size"
          onget="return 77;"
          onset="alert('Changed to:'+val); return val;"/&gt;</PRE></DIV>



<P>
This property will always return 77 when retrieved. When set, an alert
will be displayed which displays the value to assign to the property.
The special variable <SPAN CLASS="attrib">val</SPAN> holds the value that
the property should be assigned to. Use this to validate it or store it. The
<SPAN CLASS="attrib">onset</SPAN> property should also return the new value.
</P>

<P>
The following decribes what happens in a typical case:
</P>

<P>
There are two elements, one called 'banana' and the other 'orange'. They
each have a custom property called 'size'. When the following line of script
is executed:
</P>


<DIV CLASS="sample"><PRE>banana.size = orange.size;</PRE></DIV>



<OL>
  <LI>The <SPAN CLASS="attrib">onget</SPAN> script is called for the size
      property of the orange. The script calculates the value and returns it.
  </LI>
  <LI>The <SPAN CLASS="attrib">onset</SPAN> handler of the size property of the
      banana is called. This script uses the value passed in the
      <SPAN CLASS="attrib">val</SPAN> variable and assigns it to the size property
      of the banana in some manner.
  </LI>
</OL>

<P>
Note that unlike a field, a property does not hold a value. Attempting to set a
property that does not have an <SPAN CLASS="attrib">onset</SPAN> handler will
generate an error. You will often use a separate field to hold the actual value
of the property. It is also common to have the properties match an attribute on
the XBL-defined element. The following example maps a property to an attribute
on an element.
</P>


<DIV CLASS="sample"><PRE>&lt;property name="size"
          onget="return this.getAttribute('size');"
          onset="return this.setAttribute('size',val);"
/&gt;</PRE></DIV>



<P>
Whenever a script attempts to get the value of the property, it is grabbed
instead from the attribute on the element with the same name. Whenever a script
attempts to set the value of a property, it is set as an attribute on the
element. This is convenient because then you can modify the property or the
attribute and both will have the same value.
</P>

<P>
You can use an alternate syntax for the <SPAN CLASS="attrib">onget</SPAN> and
<SPAN CLASS="attrib">onset</SPAN> attributes that is useful if the scripts are
longer. You can replace the <SPAN CLASS="attrib">onget</SPAN> attribute with a
child element called <A CLASS="tag" HREF="elemref/ref_xblgetter.html">getter</A>. Similarly, you can
replace the <SPAN CLASS="attrib">onset</SPAN> attribute with a
<A CLASS="tag" HREF="elemref/ref_xblsetter.html">setter</A> element. The example below shows this:
</P>


<DIV CLASS="sample"><PRE>&lt;property name="number"&gt;
  &lt;getter&gt;
    return this.getAttribute('number');
  &lt;/getter&gt;
  &lt;setter&gt;
    var v = parseInt(val,10);
    if (!isNaN(v)) return this.setAttribute('number',''+v);
    else return this.getAttribute('number');"
  &lt;/setter&gt;
&lt;/property&gt;</PRE></DIV>



<P>
The property in this example will only be able to hold integer values. If other
characters are entered, they are stripped off. If there are no digits, the value
is not changed. This is done in the code inside the <A CLASS="tag" HREF="elemref/ref_xblsetter.html">setter</A>
element. The real value of the property is stored in the
<SPAN CLASS="attrib">number</SPAN> attribute.
</P>

<P>
You can use either syntax for creating get and set handlers.
</P>

<P>
You can make a field or property read-only by adding a
<SPAN CLASS="attrib">readonly</SPAN> attribute to the
<A CLASS="tag" HREF="elemref/ref_xblfield.html">field</A> tag or
<A CLASS="tag" HREF="elemref/ref_xblproperty.html">property</A> tag and setting it to
<SPAN CLASS="aval">true</SPAN>. Attempting to set the value of a read-only property
will fail.
</P>

<HR>
<P>
<A HREF="xblmethods.html">(Next)</A>
The next section shows how to add methods to XBL-defined elements.

</P>
</div>

<div class="navlinks-pnc">

  <a class="prevlink" title="11.3 - XBL Attribute Inheritance"
     href="xblatin.html">Previous</a>


  <a class="nextlink" title="11.5 - Adding Methods"
     href="xblmethods.html">Next</a>

</div>

</div>

<hr class="edgesplit">

<div id="copyblock">
  Copyright (C) 1999 - 2004 XulPlanet.com
</div>

</body>
</html>

