<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="stylesheet" title="Default Style" href="styles/default/main.css" type="text/css">
<link rel="stylesheet" href="styles/default/xultu.css" type="text/css">


<link rel="stylesheet" href="styles/default/xultu-print.css" type="text/css" media="print">


<link rel="home"   href="http://www.xulplanet.com/"            title="http://www.XulPlanet.com/">
<link rel="search" href="http://www.xulplanet.com/cgi-bin/search/search.cgi" title="Search XulPlanet">
<link rel="author" href="http://www.xulplanet.com/ndeakin" title="Neil Deakin">
 <link rel="up" href="http://www.xulplanet.com/tutorials/" title="Up"> 
 <link rel="first" href="intro.html" title="First"> 
 <link rel="last" href="end.html" title="Last"> 

 <link rel="prev" href="domlists.html"> 
 <link rel="next" href="xpcom.html"> 

<meta name="Description" content="Step by step tutorial of the XML User Interface Language">

<title>XulPlanet.com - Box Objects</title>

</head>
<body>

<div id="header">
  <a href="http://www.xulplanet.com/">
    <img id="logo" src="images/xulplanet.png" width="215" height="65" alt="XUL Planet">
  </a>

<div id="locationlinks">
  <a href="http://www.xulplanet.com/">Home</a> &gt;

  <a href="http://www.xulplanet.com/tutorials/">Tutorials</a> :


  <a href="index.html">XUL Tutorial</a> :



 7.4 - Box Objects 
</div>



</div>



<hr class="edgesplit">

<div id="sidebar">

<div id="search">
  <form action="/cgi-bin/search/search.cgi" method="get">
    Search:<br>
    <input id="search-box" name="Terms" type="text">
    <input type="submit" value="Go">
  </form>
</div>

<hr>

<ul class="sidebar-section-links">
  <li><a href="http://www.xulplanet.com/tutorials/xultu/allofit.zip">Single Document Version</a></li>
  <li><a href="http://www.xulplanet.com/tutorials/xultu/xultu.zip">Download the XUL Tutorial</a><br></li>
  <li><a href="http://www.xulplanet.com/references/elemref/">Element Reference</a></li>
  <li><a href="http://www.xulplanet.com/references/elemref/quickref.html">Quick Reference</a><br></li>
  <li><a href="keyref.html">Key Code Reference</a></li>
  <li><a href="templateex.html">Template Syntax Examples</a></li>
</ul>

<hr>



<OL id="sidebar-docs-index">
  <LI class="sidebar-section-title">Introduction
  <OL>
    <LI> <A HREF="intro.html">Introduction</A></LI>
    <LI> <A HREF="xulfile.html">XUL Structure</A></LI>
    <LI> <A HREF="chromeurl.html">The Chrome URL</A></LI>
    <LI> <A HREF="packaging.html">Contents.rdf Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Simple Elements
  <OL>
    <LI> <A HREF="window.html">Creating a Window</A></LI>
    <LI> <A HREF="buttons.html">Adding Buttons</A></LI>
    <LI> <A HREF="textimage.html">Adding Labels and Images</A></LI>
    <LI> <A HREF="inputs.html">Input Controls</A></LI>
    <LI> <A HREF="lists.html">List Controls</A></LI>
    <LI> <A HREF="progress.html">Progress Meters</A></LI>
    <LI> <A HREF="htmlelem.html">Adding HTML Elements</A></LI>
    <LI> <A HREF="springs.html">Using Spacers</A></LI>
    <LI> <A HREF="advbtns.html">More Button Features</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">The Box Model
  <OL>
    <LI> <A HREF="boxes.html">The Box Model</A></LI>
    <LI> <A HREF="boxstyle.html">Element Positioning</A></LI>
    <LI> <A HREF="boxdet.html">Box Model Details</A></LI>
    <LI> <A HREF="titledbox.html">Groupboxes</A></LI>
    <LI> <A HREF="boxfinal.html">Adding More Elements</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">More Layout Elements
  <OL>
    <LI> <A HREF="stacks.html">Stacks and Decks</A></LI>
    <LI> <A HREF="bulletins.html">Stack Positioning</A></LI>
    <LI> <A HREF="tabpanel.html">Tabboxes</A></LI>
    <LI> <A HREF="grids.html">Grids</A></LI>
    <LI> <A HREF="cpanels.html">Content Panels</A></LI>
    <LI> <A HREF="splitter.html">Splitters</A></LI>
    <LI> <A HREF="scroll.html">Scroll Bars</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Toolbars and Menus
  <OL>
    <LI> <A HREF="toolbar.html">Toolbars</A></LI>
    <LI> <A HREF="menubar.html">Simple Menu Bars</A></LI>
    <LI> <A HREF="advmenu.html">More Menu Features</A></LI>
    <LI> <A HREF="popups.html">Popup Menus</A></LI>
    <LI> <A HREF="menuscroll.html">Scrolling Menus</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Events and Scripts
  <OL>
    <LI> <A HREF="events.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="advevents.html">More Event Handlers</A></LI>
    <LI> <A HREF="keyshort.html">Keyboard Shortcuts</A></LI>
    <LI> <A HREF="focus.html">Focus and Selection</A></LI>
    <LI> <A HREF="commands.html">Commands</A></LI>
    <LI> <A HREF="commandupdate.html">Updating Commands</A></LI>
    <LI> <A HREF="broadob.html">Broadcasters and Observers</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Document Object Model
  <OL>
    <LI> <A HREF="dom.html">Document Object Model</A></LI>
    <LI> <A HREF="dommodify.html">Modifying a XUL Interface</A></LI>
    <LI> <A HREF="domlists.html">Manipulating Lists</A></LI>
    <LI> <SPAN CLASS="currentpage">Box Objects</SPAN></LI>
    <LI> <A HREF="xpcom.html">XPCOM Interfaces</A></LI>
    <LI> <A HREF="xpcomex.html">XPCOM Examples</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Trees
  <OL>
    <LI> <A HREF="trees.html">Trees</A></LI>
    <LI> <A HREF="advtrees.html">More Tree Features</A></LI>
    <LI> <A HREF="seltree.html">Tree Selection</A></LI>
    <LI> <A HREF="treeview.html">Custom Tree Views</A></LI>
    <LI> <A HREF="treeviewdet.html">Tree View Details</A></LI>
    <LI> <A HREF="treeboxobject.html">Tree Box Objects</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">RDF and Templates
  <OL>
    <LI> <A HREF="intrordf.html">Introduction to RDF</A></LI>
    <LI> <A HREF="templates.html">Templates</A></LI>
    <LI> <A HREF="treetempl.html">Trees and Templates</A></LI>
    <LI> <A HREF="datasrc.html">RDF Datasources</A></LI>
    <LI> <A HREF="advrules.html">Advanced Rules</A></LI>
    <LI> <A HREF="persist.html">Persistent Data</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Skins and Locales
  <OL>
    <LI> <A HREF="style.html">Adding Style Sheets</A></LI>
    <LI> <A HREF="treestyle.html">Styling a Tree</A></LI>
    <LI> <A HREF="defskin.html">Modifying the Default Skin</A></LI>
    <LI> <A HREF="cskin.html">Creating a Skin</A></LI>
    <LI> <A HREF="locale.html">Localization</A></LI>
    <LI> <A HREF="locprops.html">Property Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Bindings
  <OL>
    <LI> <A HREF="introxbl.html">Introduction to XBL</A></LI>
    <LI> <A HREF="xblcontent.html">Anonymous Content</A></LI>
    <LI> <A HREF="xblatin.html">XBL Attribute Inheritance</A></LI>
    <LI> <A HREF="xblprops.html">Adding Properties</A></LI>
    <LI> <A HREF="xblmethods.html">Adding Methods</A></LI>
    <LI> <A HREF="xblevents.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="xblinherit.html">XBL Inheritance</A></LI>
    <LI> <A HREF="xblex.html">XBL Example</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Specialized Window Types
  <OL>
    <LI> <A HREF="featwin.html">Features of a Window</A></LI>
    <LI> <A HREF="dialogs.html">Creating Dialogs</A></LI>
    <LI> <A HREF="filedialog.html">Open and Save Dialogs</A></LI>
    <LI> <A HREF="wizard.html">Creating a Wizard</A></LI>
    <LI> <A HREF="advwiz.html">More Wizards</A></LI>
    <LI> <A HREF="overlay.html">Overlays</A></LI>
    <LI> <A HREF="crosspov.html">Cross Package Overlays</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Installation
  <OL>
    <LI> <A HREF="xpinstall.html">Creating an Installer</A></LI>
    <LI> <A HREF="xpiscript.html">Install Scripts</A></LI>
    <LI> <A HREF="xpiadv.html">Additional Install Features</A></LI>
  </OL>
</OL>

</div>



<div id="content">

<div class="navlinks-pnc">

  <a class="prevlink" title="7.3 - Manipulating Lists"
     href="domlists.html">Previous</a>


  <a class="nextlink" title="7.5 - XPCOM Interfaces"
     href="xpcom.html">Next</a>

</div>

<div class="xultu-content">

<h2>Box Objects</h2>

<P>
This section describes the box object, which holds display and layout related
information about a XUL box as well as some details about XUL layout.
</P>

<H3>About Mozilla Layout</H3>

<P>
Mozilla divides things into two sets of trees, the content tree and the layout
tree. The content tree stores the nodes as they are found in the source code. The
layout tree holds a different tree of nodes for each individual component that can
be displayed. The layout tree holds the structure as the nodes are expected to be
displayed There is not necessarily a one to one relationship between content and
layout nodes. Some content nodes may have several layout objects, for example, each
line of a paragraph has a separate layout object. Conversely, some content nodes have
no layout objects at all. For instance, the <A CLASS="tag" HREF="elemref/ref_key.html">key</A> element
doesn't have any layout objects since it isn't displayed in any way. Similarly, any
element that has been hidden will not have a layout object either.
</P>

<P>
The DOM is generally used only to get and modify information pertaining to the
content or structure of the document. It's relatively simple to determine what kind
of content tree node will be created for a given element. A XUL element, for example,
will have a XULElement type of content node.
</P>

<P>
The layout objects that will be created are determined in a more complex manner.
Various pieces of information are used such as the tag name, the attributes on an
element, various CSS properties, the elements and layout objects around the element,
and the XBL associated with an element (XBL is described in a later section). Unless
you change the style for an element, most XUL elements will usually use the box layout
object or one of its subtypes. Recall that all XUL elements are types of boxes, that
is the box is the base of all displayed XUL elements. However, there are a number of
subtypes, about 25 or so, for specific XUL elements. Some of these subtypes, such as
the stack or listbox are needed for more complex layouts than the basic box, while
others such as the button are used only to add extra mouse and key event handling.
</P>

<P>
The layout object associated with an element can be removed and a completely different
type of object created just by changing the CSS <SPAN CLASS="attrib">display</SPAN>
property, among others. For example changing the <SPAN CLASS="attrib">display</SPAN>
property of an button element to <SPAN CLASS="aval">block</SPAN> will cause the button
layout object to be deleted and a block object to be created instead. Naturally, this
will change the appearance and function of the element.
</P>

<P>
It isn't necessary to know the details of how the layout objects are constructed but
it is quite useful to at least have at least the knowledge of what is described above
of XUL layout for more advanced XUL development.
</P>

<H3>Box Objects</H3>

<P>
The layout objects are not accessible to the developer for manipulating. They are
internal to the XUL layout components. However, XUL provides some helper objects,
called box objects, which can provide some layout related information. As the name
implies, they are available for all box-based elements.
</P>

<P>
There are several subtypes of box object, although only a couple of them are
generally used. The others have functions which are more easily accessible by
methods mapped directly onto the element, since those types are generally only used
with one particular element. The base box object, or the interface
<A HREF="http://www.xulplanet.com/references/objref/BoxObject.html">BoxObject</A>,
however, has a number of properties which are quite useful for XUL development.
</P>

<P>
The base box object has two useful features. First, you can retrieve the position
and size of the XUL element as displayed, and second, you can determine the order
of the elements in the box as displayed, instead of their order as they are stored
in the DOM.
</P>

<P>
The box object provides four properties, x, y, width and height, for determining
the position and size of an element. The x and y coordinates are relative to the
top left corner of the document in the window (excluding the window border and title)
and are measured in pixels. The width and height properties are also measured in
pixels and return the width and height of the element including CSS padding and border,
if any.
</P>

<P>
The values are always the position and sizes as currently displayed, so the values
will be different if the element is moved or resized. For example, a flexible element
will change in size and the box object dimensions will update accordingly. The following
example shows this.
</P>


Example 7.4.1:
<A HREF='examples/ex_boxobject_1.xul.txt'>Source</A>
<A HREF="examples/ex_boxobject_1.xul" ONCLICK="window.open('examples/ex_boxobject_1.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;button label="Click Me"
        oncommand="alert('The width is ' + this.boxObject.width);"/&gt;</PRE></DIV>



<P>
You can use the <SPAN CLASS="attrib">width</SPAN> and
<SPAN CLASS="attrib">height</SPAN> attributes to specify the width and height of an
element, respectively. Normally, these attributes would not be used so the element
would determine a suitable size to fit its contents. Thus, these attributes override
the default size and use a specific size. The corresponding width and height
properties may be used to adjust the dimensions of an element at any time, if you
wish to display an element at a specific size. Retrieving the values of these
properties will return the size if it was explicitly specified. Note that these
properties will return an empty string if the width or height attributes or properties
were not set already. That is, you cannot get the current size with these properties;
instead you must use the box object properties.
</P>

<P>
This may be a bit confusing, but, the key is to remember that the width and height
properties on an element return the size that was set in the XUL while the width
and height properties of the box object return the current size.
</P>

<P>
The <SPAN CLASS="attrib">hidden</SPAN> attribute will hide an element such that it
will not be displayed. Since it is not displayed, all four position and size properties
of the box object will have the value 0. When an element is hidden, it is removed
from the display and the layout objects are removed for it. Thus, since it isn't
displayed anywhere, it will have no position or size.
</P>

<P>
The <SPAN CLASS="attrib">collapsed</SPAN> attribute will have the same effect to the
user element visually, except that it leaves the element on screen and keeps the layout
objects intact, but changes the size of the element to 0. This means that while both
hidden and collapsed elements have 0 width and height, hidden elements have a x and y
position of 0, while collapsed elements will retain their position in the window.
</P>

<P>
To retrive or modify the hidden or collapsed state use the corresponding properties as
in the following example.
</P>


Example 7.4.2:
<A HREF='examples/ex_boxobject_2.xul.txt'>Source</A>
<A HREF="examples/ex_boxobject_2.xul" ONCLICK="window.open('examples/ex_boxobject_2.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;script&gt;
function showPositionAndSize()
{
  var labelbox = document.getElementById('thelabel').boxObject;

  alert("Position is (" + labelbox.x + "," + labelbox.y +
        ") and size is (" + labelbox.width + "," +
        labelbox.height + ")");
}
&lt;/script&gt;

&lt;button label="Hide"
        oncommand="document.getElementById('thelabel').hidden = true;"/&gt;
&lt;button label="Show"
        oncommand="document.getElementById('thelabel').hidden = false;"/&gt;
&lt;button label="Collapse"
        oncommand="document.getElementById('thelabel').collapsed = true;"/&gt;
&lt;button label="Uncollapse"
        oncommand="document.getElementById('thelabel').collapsed = false;"/&gt;
&lt;button label="Show Position/Size"
        oncommand="showPositionAndSize();"/&gt;
&lt;label id="thelabel" value="I am a label"/&gt;</PRE></DIV>



<P>
Note that if you hide and collapse the label, it will be treated as hidden. You will
then have to unhide and uncollapse the label for it to appear again.
</P>

<H3>XUL Element Ordering</H3>

<P>
The box object may also be used to determine the display order of elements, which may
not be the same as the order in the source. Recall that DOM properties such as
childNodes, firstChild, and nextSibling may be used to navigate the document tree. The
box object also allows navigation in a similar means but retrieves the elements in
display order. 
</P>

<P>
The box object provides several properties, firstChild, lastChild, nextSibling,
previousSibling, and parentBox. Their function should be self explanatory from their
names. These properties return elements, for example, the firstChild property
returns the first displayed child element. There is no corresponding childNodes
property for box navigation; instead you must navigate by sibling using the
nextSibling or previousSibling properties.
</P>

<P>
Unlike with navigating the DOM tree, hidden elements are not included when navigating
by box objects. That means that for a box with six children where the first two
are hidden, the firstChild property will return the third element. However, collapsed
elements are included since they are still displayed but have no size. For example,
the next box sibling of button 1 is this next example will be button 3, because
button 2 is hidden. But the next box sibling of button 3 will be button 4 because it
is only collapsed.
</P>


Example 7.4.3:
<A HREF='examples/ex_boxobject_3.xul.txt'>Source</A>
<A HREF="examples/ex_boxobject_3.xul" ONCLICK="window.open('examples/ex_boxobject_3.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;hbox&gt;
  &lt;button label="Button 1"
          oncommand="alert('Next is: ' + this.boxObject.nextSibling.label);"/>
  &lt;button label="Button 2" hidden="true"/>
  &lt;button label="Button 3"
          oncommand="alert('Next is: ' + this.boxObject.nextSibling.label);"/>
  &lt;button label="Button 4" collapsed="true"/>
&lt;/hbox&gt;</PRE></DIV>



<P>
When a XUL box is laid out on a window, the elements are ordered according to a
number of properties, for instance the orientation, their ordinal group and their
direction. The orientation is commonly modified using the
<SPAN CLASS="attrib">orient</SPAN> attribute. There is also a corresponding CSS
property <SPAN CLASS="attrib">-moz-box-orient</SPAN> which may be used instead,
depending on the situation. This attribute was explained earlier in the section on
boxes.
</P>

<P>
The <SPAN CLASS="attrib">ordinal</SPAN> attribute on an element may be used to specify
the ordinal group of the element, or you can use the CSS property
<SPAN CLASS="attrib">-moz-box-ordinal-group</SPAN>.
</P>

<P>
Elements with a lower ordinal value are placed in the box before elements with a
higher ordinal value. For example, if one element has an ordinal of 2, it would be
placed before an element with ordinal 3 or higher but after one with ordinal 1.
The default value if the ordinal is not specified is 1. This means that if you
want to change the displayed order of elements, you will often need to adjust
the ordinals of several elements.
</P>

<P>
Adjusting the ordinal of an element is not commonly done as you would usually just
place the elements in a different order in the source. It might be used to rearrange
items later without adjusting the DOM. The following example demonstrates this.
</P>


Example 7.4.4:
<A HREF='examples/ex_boxobject_4.xul.txt'>Source</A>
<A HREF="examples/ex_boxobject_4.xul" ONCLICK="window.open('examples/ex_boxobject_4.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;hbox&gt;
  &lt;button label="One" oncommand="this.ordinal++;"/>
  &lt;button label="Two" oncommand="this.ordinal++;"/>
  &lt;button label="Three" oncommand="this.ordinal++;"/>
&lt;/hbox&gt;</PRE></DIV>



<P>
If you press the first button, its ordinal will increase by one, from 1 to 2. It
will appear at the end of the row since the other buttons have an ordinal of 1. If you
press the second button, its ordinal will increase by one and will be moved to the end
of the row. Items with the same ordinal value appear in the same order as in the
source. If you then press the button labeled One again, its ordinal will increase to 3
and will move to the end. Finally, pressing the button labeled Three will increase its
ordinal to 2 and it will appear in between the other two buttons.
</P>

<P>
The final box ordering attribute is the <SPAN CLASS="attrib">dir</SPAN> attribute, or
the <SPAN CLASS="attrib">-moz-box-direction</SPAN> CSS property. If this is set to
<SPAN CLASS="aval">reverse</SPAN>, all of the children in the box or displayed in
reverse order. In a horizontal box, the elements will be displayed from right to
left and in a vertical box, the elements will be displayed from bottom to top. Here is
an example:
</P>


Example 7.4.5:
<A HREF='examples/ex_boxobject_5.xul.txt'>Source</A>
<A HREF="examples/ex_boxobject_5.xul" ONCLICK="window.open('examples/ex_boxobject_5.xul','xulex','chrome,resizable'); return false;">View</A>
<DIV CLASS="example"><PRE>&lt;hbox dir="reverse"&gt;
  &lt;button label="Left"/>
  &lt;button label="Center"/>
  &lt;button label="Right"/>
&lt;/hbox&gt;</PRE></DIV>



<P>
Navigation through the nodes using the box object ordering will return the elements
in the order they are displayed accounting for the ordinal adjustments made. Thus, if
you change the ordinal of an element, it will have a different position in the box
order. Reversing the direction, however, does not change the box order.
</P>

<HR>
<P>
<A HREF="xpcom.html">(Next)</A>
Next, we'll find out how to use XPCOM objects from XUL and scripts.

</P>
<P>

Examples:
  <A HREF='examples/ex_boxobject_1.xul.txt'>7.4.1</A>
  <A HREF='examples/ex_boxobject_2.xul.txt'>7.4.2</A>
  <A HREF='examples/ex_boxobject_3.xul.txt'>7.4.3</A>
  <A HREF='examples/ex_boxobject_4.xul.txt'>7.4.4</A>
  <A HREF='examples/ex_boxobject_5.xul.txt'>7.4.5</A>
</P>
</div>

<div class="navlinks-pnc">

  <a class="prevlink" title="7.3 - Manipulating Lists"
     href="domlists.html">Previous</a>


  <a class="nextlink" title="7.5 - XPCOM Interfaces"
     href="xpcom.html">Next</a>

</div>

</div>

<hr class="edgesplit">

<div id="copyblock">
  Copyright (C) 1999 - 2004 XulPlanet.com
</div>

</body>
</html>

