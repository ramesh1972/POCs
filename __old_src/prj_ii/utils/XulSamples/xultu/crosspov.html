<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="stylesheet" title="Default Style" href="styles/default/main.css" type="text/css">
<link rel="stylesheet" href="styles/default/xultu.css" type="text/css">


<link rel="stylesheet" href="styles/default/xultu-print.css" type="text/css" media="print">


<link rel="home"   href="http://www.xulplanet.com/"            title="http://www.XulPlanet.com/">
<link rel="search" href="http://www.xulplanet.com/cgi-bin/search/search.cgi" title="Search XulPlanet">
<link rel="author" href="http://www.xulplanet.com/ndeakin" title="Neil Deakin">
 <link rel="up" href="http://www.xulplanet.com/tutorials/" title="Up"> 
 <link rel="first" href="intro.html" title="First"> 
 <link rel="last" href="end.html" title="Last"> 

 <link rel="prev" href="overlay.html"> 
 <link rel="next" href="xpinstall.html"> 

<meta name="Description" content="Step by step tutorial of the XML User Interface Language">

<title>XulPlanet.com - Cross Package Overlays</title>

</head>
<body>

<div id="header">
  <a href="http://www.xulplanet.com/">
    <img id="logo" src="images/xulplanet.png" width="215" height="65" alt="XUL Planet">
  </a>

<div id="locationlinks">
  <a href="http://www.xulplanet.com/">Home</a> &gt;

  <a href="http://www.xulplanet.com/tutorials/">Tutorials</a> :


  <a href="index.html">XUL Tutorial</a> :



 12.7 - Cross Package Overlays 
</div>



</div>



<hr class="edgesplit">

<div id="sidebar">

<div id="search">
  <form action="/cgi-bin/search/search.cgi" method="get">
    Search:<br>
    <input id="search-box" name="Terms" type="text">
    <input type="submit" value="Go">
  </form>
</div>

<hr>

<ul class="sidebar-section-links">
  <li><a href="http://www.xulplanet.com/tutorials/xultu/allofit.zip">Single Document Version</a></li>
  <li><a href="http://www.xulplanet.com/tutorials/xultu/xultu.zip">Download the XUL Tutorial</a><br></li>
  <li><a href="http://www.xulplanet.com/references/elemref/">Element Reference</a></li>
  <li><a href="http://www.xulplanet.com/references/elemref/quickref.html">Quick Reference</a><br></li>
  <li><a href="keyref.html">Key Code Reference</a></li>
  <li><a href="templateex.html">Template Syntax Examples</a></li>
</ul>

<hr>



<OL id="sidebar-docs-index">
  <LI class="sidebar-section-title">Introduction
  <OL>
    <LI> <A HREF="intro.html">Introduction</A></LI>
    <LI> <A HREF="xulfile.html">XUL Structure</A></LI>
    <LI> <A HREF="chromeurl.html">The Chrome URL</A></LI>
    <LI> <A HREF="packaging.html">Contents.rdf Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Simple Elements
  <OL>
    <LI> <A HREF="window.html">Creating a Window</A></LI>
    <LI> <A HREF="buttons.html">Adding Buttons</A></LI>
    <LI> <A HREF="textimage.html">Adding Labels and Images</A></LI>
    <LI> <A HREF="inputs.html">Input Controls</A></LI>
    <LI> <A HREF="lists.html">List Controls</A></LI>
    <LI> <A HREF="progress.html">Progress Meters</A></LI>
    <LI> <A HREF="htmlelem.html">Adding HTML Elements</A></LI>
    <LI> <A HREF="springs.html">Using Spacers</A></LI>
    <LI> <A HREF="advbtns.html">More Button Features</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">The Box Model
  <OL>
    <LI> <A HREF="boxes.html">The Box Model</A></LI>
    <LI> <A HREF="boxstyle.html">Element Positioning</A></LI>
    <LI> <A HREF="boxdet.html">Box Model Details</A></LI>
    <LI> <A HREF="titledbox.html">Groupboxes</A></LI>
    <LI> <A HREF="boxfinal.html">Adding More Elements</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">More Layout Elements
  <OL>
    <LI> <A HREF="stacks.html">Stacks and Decks</A></LI>
    <LI> <A HREF="bulletins.html">Stack Positioning</A></LI>
    <LI> <A HREF="tabpanel.html">Tabboxes</A></LI>
    <LI> <A HREF="grids.html">Grids</A></LI>
    <LI> <A HREF="cpanels.html">Content Panels</A></LI>
    <LI> <A HREF="splitter.html">Splitters</A></LI>
    <LI> <A HREF="scroll.html">Scroll Bars</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Toolbars and Menus
  <OL>
    <LI> <A HREF="toolbar.html">Toolbars</A></LI>
    <LI> <A HREF="menubar.html">Simple Menu Bars</A></LI>
    <LI> <A HREF="advmenu.html">More Menu Features</A></LI>
    <LI> <A HREF="popups.html">Popup Menus</A></LI>
    <LI> <A HREF="menuscroll.html">Scrolling Menus</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Events and Scripts
  <OL>
    <LI> <A HREF="events.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="advevents.html">More Event Handlers</A></LI>
    <LI> <A HREF="keyshort.html">Keyboard Shortcuts</A></LI>
    <LI> <A HREF="focus.html">Focus and Selection</A></LI>
    <LI> <A HREF="commands.html">Commands</A></LI>
    <LI> <A HREF="commandupdate.html">Updating Commands</A></LI>
    <LI> <A HREF="broadob.html">Broadcasters and Observers</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Document Object Model
  <OL>
    <LI> <A HREF="dom.html">Document Object Model</A></LI>
    <LI> <A HREF="dommodify.html">Modifying a XUL Interface</A></LI>
    <LI> <A HREF="domlists.html">Manipulating Lists</A></LI>
    <LI> <A HREF="boxobject.html">Box Objects</A></LI>
    <LI> <A HREF="xpcom.html">XPCOM Interfaces</A></LI>
    <LI> <A HREF="xpcomex.html">XPCOM Examples</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Trees
  <OL>
    <LI> <A HREF="trees.html">Trees</A></LI>
    <LI> <A HREF="advtrees.html">More Tree Features</A></LI>
    <LI> <A HREF="seltree.html">Tree Selection</A></LI>
    <LI> <A HREF="treeview.html">Custom Tree Views</A></LI>
    <LI> <A HREF="treeviewdet.html">Tree View Details</A></LI>
    <LI> <A HREF="treeboxobject.html">Tree Box Objects</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">RDF and Templates
  <OL>
    <LI> <A HREF="intrordf.html">Introduction to RDF</A></LI>
    <LI> <A HREF="templates.html">Templates</A></LI>
    <LI> <A HREF="treetempl.html">Trees and Templates</A></LI>
    <LI> <A HREF="datasrc.html">RDF Datasources</A></LI>
    <LI> <A HREF="advrules.html">Advanced Rules</A></LI>
    <LI> <A HREF="persist.html">Persistent Data</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Skins and Locales
  <OL>
    <LI> <A HREF="style.html">Adding Style Sheets</A></LI>
    <LI> <A HREF="treestyle.html">Styling a Tree</A></LI>
    <LI> <A HREF="defskin.html">Modifying the Default Skin</A></LI>
    <LI> <A HREF="cskin.html">Creating a Skin</A></LI>
    <LI> <A HREF="locale.html">Localization</A></LI>
    <LI> <A HREF="locprops.html">Property Files</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Bindings
  <OL>
    <LI> <A HREF="introxbl.html">Introduction to XBL</A></LI>
    <LI> <A HREF="xblcontent.html">Anonymous Content</A></LI>
    <LI> <A HREF="xblatin.html">XBL Attribute Inheritance</A></LI>
    <LI> <A HREF="xblprops.html">Adding Properties</A></LI>
    <LI> <A HREF="xblmethods.html">Adding Methods</A></LI>
    <LI> <A HREF="xblevents.html">Adding Event Handlers</A></LI>
    <LI> <A HREF="xblinherit.html">XBL Inheritance</A></LI>
    <LI> <A HREF="xblex.html">XBL Example</A></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Specialized Window Types
  <OL>
    <LI> <A HREF="featwin.html">Features of a Window</A></LI>
    <LI> <A HREF="dialogs.html">Creating Dialogs</A></LI>
    <LI> <A HREF="filedialog.html">Open and Save Dialogs</A></LI>
    <LI> <A HREF="wizard.html">Creating a Wizard</A></LI>
    <LI> <A HREF="advwiz.html">More Wizards</A></LI>
    <LI> <A HREF="overlay.html">Overlays</A></LI>
    <LI> <SPAN CLASS="currentpage">Cross Package Overlays</SPAN></LI>
  </OL>
  </LI>
  <LI class="sidebar-section-title">Installation
  <OL>
    <LI> <A HREF="xpinstall.html">Creating an Installer</A></LI>
    <LI> <A HREF="xpiscript.html">Install Scripts</A></LI>
    <LI> <A HREF="xpiadv.html">Additional Install Features</A></LI>
  </OL>
</OL>

</div>



<div id="content">

<div class="navlinks-pnc">

  <a class="prevlink" title="12.6 - Overlays"
     href="overlay.html">Previous</a>


  <a class="nextlink" title="13.1 - Creating an Installer"
     href="xpinstall.html">Next</a>

</div>

<div class="xultu-content">

<h2>Cross Package Overlays</h2>

<P>
This section describes how to apply overlays to files that don't
import them.
</P>

<H3>Applying Overlays to other Packages</H3>

<P>
Overlays have another very useful feature. In the examples in the previous section,
the overlays were imported by the window. You can also go the other way and have the
overlays specify which windows that they apply to. You specify this by modifying the
contents.rdf file for your package. This is useful because the overlay can modify
the user interface of another package without changing the other package. For
example, you could add menu items or toolbars to the Mozilla browser window.
</P>

<P>
We'll use this feature to add a toolbar to the Mozilla browser window. 
The Mozilla Mail application uses overlays to add content to the browser window.
For example, if Mail is not installed, there will be no New Message command.
However, if Mail is installed, an overlay will be applied to the menu to add the
New Message command. Below, we'll add a find files toolbar to the browser. It
probably wouldn't be useful to have this feature, but we'll do it anyway.
</P>

<P>
Mozilla allows you to add a list of overlays to the contents.rdf file that you use
to list chrome packages, skins and locales. Once you have created an overlay, you
can add it to the contents.rdf file. Then add items, one for each window that you
want the overlay to apply to.
</P>

<DIV CLASS="task">

<P>
First, let's create a simple overlay. It will just have a few fields for entering
a filename and directory to search. Call the file foverlay.xul and add it to the
findfile directory along with findfile.xul.
</P>


Example 12.7.1:
<A HREF='examples/ex_crosspov_1.xul.txt'>Source</A>
<DIV CLASS="examplec"><PRE>&lt;?xml version="1.0"?&gt;

&lt;overlay
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"&gt;

&lt;toolbox id="navigator-toolbox"&gt;
  &lt;toolbar id="findfile_toolbar"&gt;
    &lt;label control="findfile_filename" value="Search for files named:"/&gt;
    &lt;textbox id="findfile_filename"/&gt;
    &lt;label control="findfile_dir" value="Directory:"/&gt;
    &lt;textbox id="findfile_dir"/&gt;
    &lt;button label="Browse..."/&gt;
  &lt;/toolbar&gt;
&lt;/toolbox&gt;

&lt;/overlay&gt;</PRE></DIV>



<P>
You can view this by changing the overlay to a window. The only thing that
is special here is the <SPAN CLASS="attrib">id</SPAN> used on the
<A CLASS="tag" HREF="elemref/ref_toolbox.html">toolbox</A>. This value
(<SPAN CLASS="aval">navigator-toolbox</SPAN>) is the same as the identifier
of the toolbox in the browser window (navigator.xul). This means that the
overlay will apply to the toolbox in the browser window and the content will
be added as an extra toolbar.
</P>

<P>
To add this overlay to the manifest file, we need to add two resources. First,
we add one for each window that we are applying an overlay to. The code below should
be added into content.rdf just before the closing RDF tag.
</P>


<DIV CLASS="sample"><PRE>&lt;RDF:Seq about="urn:mozilla:overlays"&gt;
  &lt;RDF:li resource="chrome://navigator/content/navigator.xul"/&gt;
&lt;/RDF:Seq&gt;</PRE></DIV>



<P>
This declares that we are adding a overlay window, a child of the root overlay node
(urn:mozilla:overlays). You can add additional nodes for any other windows that
you want to apply overlays to by adding additional <SPAN CLASS=" tag">li</SPAN> nodes.
</P>

<P>
Next, we add a node for each overlay to apply to the window. In this case, we only
have one, but we could apply others also. Add these lines just after the previous
lines.
</P>


<DIV CLASS="sample"><PRE>&lt;RDF:Seq about="chrome://navigator/content/navigator.xul"&gt;
  &lt;RDF:li&gt;chrome://findfile/content/foverlay.xul&lt;/RDF:li&gt;
&lt;/RDF:Seq&gt;</PRE></DIV>



</DIV>

<P>
Mozilla reads this information and builds a list of overlays that are applied
to other windows. It stores this information in the chrome/overlayinfo directory.
You do not need to manually modify the files in this directory. It is automatically
generated and modified when Mozilla is first run or when new packages are installed.
However, you can force the data to be rebuilt by deleting this directory and the
chrome.rdf file.
</P>

<P ALIGN="CENTER">
<IMG SRC="images/crosspov1.jpg" ALT="" WIDTH=620 HEIGHT=130>
</P>

<P>
As a side note, you can use a similar technique to apply extra style sheets.
The following example shows how:
</P>


<DIV CLASS="sample"><PRE>&lt;RDF:Seq about="urn:mozilla:stylesheets"&gt;
  &lt;RDF:li resource="chrome://messenger/content/messenger.xul"/&gt;
&lt;/RDF:Seq&gt;

&lt;RDF:Seq about="chrome://messenger/content/messenger.xul"&gt;
  &lt;RDF:li&gt;chrome://blueswayedshoes/skin/myskinfile.css&lt;/RDF:li&gt;
&lt;/RDF:Seq&gt;</PRE></DIV>



<HR>
<P>
<A HREF="xpinstall.html">(Next)</A>
Next, we'll see how to create an installer for a XUL application.

</P>
<P>

Examples:
  <A HREF='examples/ex_crosspov_1.xul.txt'>12.7.1</A>
</P>
</div>

<div class="navlinks-pnc">

  <a class="prevlink" title="12.6 - Overlays"
     href="overlay.html">Previous</a>


  <a class="nextlink" title="13.1 - Creating an Installer"
     href="xpinstall.html">Next</a>

</div>

</div>

<hr class="edgesplit">

<div id="copyblock">
  Copyright (C) 1999 - 2004 XulPlanet.com
</div>

</body>
</html>

